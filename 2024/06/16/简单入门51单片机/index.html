<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.2.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha256-XOqroi11tY4EFQMR9ZYwZWKj5ZXiftSx36RRuC3anlA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"zhoucong.top","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.20.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="初识51单片机我使用的是开拓者提供的51单片机，资料打包如下： 开拓者V2光盘资料 提取码: 85nk  STC89C51RC&#x2F;RD+系列单片机简介STC89C51RC&#x2F;RD+系列单片机（包括STC89C52RC）是宏晶科技推出的新一代超强抗干扰、高速、低功耗的单片机，与传统8051系列单片机的指令和引脚完全兼容。12时钟&#x2F;机器周期和6时钟&#x2F;机器周期可任意选">
<meta property="og:type" content="article">
<meta property="og:title" content="简单入门51单片机">
<meta property="og:url" content="http://zhoucong.top/2024/06/16/%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A851%E5%8D%95%E7%89%87%E6%9C%BA/index.html">
<meta property="og:site_name" content="Vikebt&#39;s blog">
<meta property="og:description" content="初识51单片机我使用的是开拓者提供的51单片机，资料打包如下： 开拓者V2光盘资料 提取码: 85nk  STC89C51RC&#x2F;RD+系列单片机简介STC89C51RC&#x2F;RD+系列单片机（包括STC89C52RC）是宏晶科技推出的新一代超强抗干扰、高速、低功耗的单片机，与传统8051系列单片机的指令和引脚完全兼容。12时钟&#x2F;机器周期和6时钟&#x2F;机器周期可任意选">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/12/05/eEqtN7Hrz2ZlU6a.png">
<meta property="og:image" content="https://i.loli.net/2020/12/05/1ukAirLI7dxbeXj.png">
<meta property="og:image" content="https://i.loli.net/2020/12/05/pGAZv8HeObRUh54.png">
<meta property="og:image" content="https://i.loli.net/2020/12/05/8kacmQiPXFMo1fD.png">
<meta property="og:image" content="https://i.loli.net/2020/12/05/NEkBiIbgx8SuqA6.jpg">
<meta property="og:image" content="https://i.loli.net/2020/12/05/yRMpA3JiZanHINW.jpg">
<meta property="og:image" content="https://i.loli.net/2020/12/05/bjtzDLiroPOcW4F.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/XJaqRoG6pVN1gCf.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/czEyhjme6GBbSt8.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/p2qFLnlsf4yvYzN.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/G9MAo5rs3JHRXCn.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/Gc8dxJ541k3PmXl.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/yVR1zuKLsj7T5gJ.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/8UnxjIoEHB3YKtC.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/HgnKmUIsxOVa853.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/z8edNqnhEp9xmJl.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/tFXHRcvlgIpM4Zh.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/VzPjuSA1Zkv69K5.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/Mk8CZTAsRc3bE5X.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/CcZieDxOsVRmj1E.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/Ev2gFBKZzpMXDQN.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/4TgwqaYFHU5m3z9.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/xNEmKunZfzbFh5I.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/ECk8IiexO5vrgLB.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/7FJHPxWafsZtIiq.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/QjTtULSuerYwHEa.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/n6qVLovPjYTKlaF.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/D7vUhyimA6bwpJd.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/ADLrWyPutTdhc1s.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/vVDf8czMtwhdKsJ.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/loafGYi4kCt5jSc.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/5TdSobO9lrnmU31.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/QqWrZ6VKAeYoMjp.png">
<meta property="og:image" content="https://i.loli.net/2020/12/06/Ti7HIJz24DNna6A.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/cbgF5lqsmoHE3uj.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/1DCZknPlJx59G4y.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/q6nduDsHgCbQwmV.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/8kFAWwavgifyxdl.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/WFBrLnIxgMEQaKj.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/LECvXmcIBnJsQtF.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/KQCVIltW29fz6Jd.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/WKoSLQuDdTy1IGn.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/PwnHAJVobMazWl3.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/4ZLMr2BE9IFHfpb.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/4TwE29efK1uqJ3l.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/E8f4jOI5pVFAv7h.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/MIw8RfK61YTXGZU.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/B1JgVqKY6HeRlFd.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/J7wbxnhk1Cqez93.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/bEYRKcOW41o9S6F.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/7qZDs6VG4wrjfyC.png">
<meta property="og:image" content="https://i.loli.net/2020/12/07/h3DLq6wQcuJ9C4m.png">
<meta property="article:published_time" content="2024-06-16T02:20:27.847Z">
<meta property="article:modified_time" content="2020-12-07T01:23:02.548Z">
<meta property="article:author" content="Vikebt">
<meta property="article:tag" content="开发">
<meta property="article:tag" content="嵌入式">
<meta property="article:tag" content="单片机">
<meta property="article:tag" content="STC89C52">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/12/05/eEqtN7Hrz2ZlU6a.png">


<link rel="canonical" href="http://zhoucong.top/2024/06/16/%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A851%E5%8D%95%E7%89%87%E6%9C%BA/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://zhoucong.top/2024/06/16/%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A851%E5%8D%95%E7%89%87%E6%9C%BA/","path":"2024/06/16/简单入门51单片机/","title":"简单入门51单片机"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>简单入门51单片机 | Vikebt's blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Vikebt's blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">人生在勤，不索何获</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
    </div>
  </div>
</div>







</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E8%AF%8651%E5%8D%95%E7%89%87%E6%9C%BA"><span class="nav-number">1.</span> <span class="nav-text">初识51单片机</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#STC89C51RC-RD-%E7%B3%BB%E5%88%97%E5%8D%95%E7%89%87%E6%9C%BA%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.</span> <span class="nav-text">STC89C51RC&#x2F;RD+系列单片机简介</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E8%A7%84%E5%88%99"><span class="nav-number">1.1.1.</span> <span class="nav-text">命名规则</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E7%89%B9%E6%80%A7"><span class="nav-number">1.1.2.</span> <span class="nav-text">主要特性</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BC%95%E8%84%9A%E5%B0%81%E8%A3%85"><span class="nav-number">1.1.3.</span> <span class="nav-text">引脚封装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BA%A7%E5%93%81%E9%80%89%E5%9E%8B%E8%A1%A8"><span class="nav-number">1.1.4.</span> <span class="nav-text">产品选型表</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%80%E5%8F%91%E6%9D%BF%E5%AE%9E%E7%89%A9%E5%9B%BE"><span class="nav-number">1.2.</span> <span class="nav-text">开发板实物图</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LED%E7%81%AF%E7%9B%B8%E5%85%B3"><span class="nav-number">2.</span> <span class="nav-text">LED灯相关</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LED%E7%AE%80%E4%BB%8B"><span class="nav-number">2.1.</span> <span class="nav-text">LED简介</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LED%E4%BB%8B%E7%BB%8D"><span class="nav-number">2.1.1.</span> <span class="nav-text">LED介绍</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E7%82%B9%E4%BA%AELED"><span class="nav-number">2.1.2.</span> <span class="nav-text">如何点亮LED</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LED%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">2.2.</span> <span class="nav-text">LED模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F"><span class="nav-number">2.3.</span> <span class="nav-text">编写程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%9C%82%E9%B8%A3%E5%99%A8%E6%8A%A5%E8%AD%A6"><span class="nav-number">3.</span> <span class="nav-text">蜂鸣器报警</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%9C%82%E9%B8%A3%E5%99%A8%E7%AE%80%E4%BB%8B"><span class="nav-number">3.1.</span> <span class="nav-text">蜂鸣器简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%9C%82%E9%B8%A3%E5%99%A8%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">3.2.</span> <span class="nav-text">蜂鸣器模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F-1"><span class="nav-number">3.3.</span> <span class="nav-text">编写程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%A0%81%E7%AE%A1%E7%9B%B8%E5%85%B3%E2%80%9374HC245"><span class="nav-number">4.</span> <span class="nav-text">数码管相关–74HC245</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%A0%81%E7%AE%A1%E7%AE%80%E4%BB%8B"><span class="nav-number">4.1.</span> <span class="nav-text">数码管简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E7%A0%81%E7%AE%A1%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">4.2.</span> <span class="nav-text">数码管模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99"><span class="nav-number">4.3.</span> <span class="nav-text">程序编写</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E6%8C%89%E9%94%AE"><span class="nav-number">5.</span> <span class="nav-text">独立按键</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8C%89%E9%94%AE%E7%AE%80%E4%BB%8B"><span class="nav-number">5.1.</span> <span class="nav-text">按键简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E6%8C%89%E9%94%AE%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">5.2.</span> <span class="nav-text">独立按键模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E7%BC%96%E5%86%99-1"><span class="nav-number">5.3.</span> <span class="nav-text">程序编写</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9F%A9%E9%98%B5%E6%8C%89%E9%94%AE-4X4"><span class="nav-number">6.</span> <span class="nav-text">矩阵按键(4X4)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#4X4%E7%9F%A9%E9%98%B5%E6%8C%89%E9%94%AE%E7%AE%80%E4%BB%8B"><span class="nav-number">6.1.</span> <span class="nav-text">4X4矩阵按键简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4X4%E7%9F%A9%E9%98%B5%E6%8C%89%E9%94%AE%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">6.2.</span> <span class="nav-text">4X4矩阵按键模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F-2"><span class="nav-number">6.3.</span> <span class="nav-text">编写程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E9%98%B5%EF%BC%888X8%EF%BC%89%E2%80%9374HC595"><span class="nav-number">7.</span> <span class="nav-text">点阵（8X8）–74HC595</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8X8LED%E7%82%B9%E9%98%B5%E7%AE%80%E4%BB%8B"><span class="nav-number">7.1.</span> <span class="nav-text">8X8LED点阵简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8X8LED%E7%82%B9%E9%98%B5%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">7.2.</span> <span class="nav-text">8X8LED点阵模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F-3"><span class="nav-number">7.3.</span> <span class="nav-text">编写程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%B4%E6%B5%81%E7%94%B5%E6%9C%BA%E6%8E%A7%E5%88%B6%E2%80%93TC1508S"><span class="nav-number">8.</span> <span class="nav-text">直流电机控制–TC1508S</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B4%E6%B5%81%E7%94%B5%E6%9C%BA%E7%AE%80%E4%BB%8B"><span class="nav-number">8.1.</span> <span class="nav-text">直流电机简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%B4%E6%B5%81%E7%94%B5%E6%9C%BA%E9%A9%B1%E5%8A%A8%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">8.2.</span> <span class="nav-text">直流电机驱动模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F-4"><span class="nav-number">8.3.</span> <span class="nav-text">编写程序</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F"><span class="nav-number">9.</span> <span class="nav-text">中断系统</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E7%AE%80%E4%BB%8B"><span class="nav-number">9.1.</span> <span class="nav-text">中断简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E7%B3%BB%E7%BB%9F%E7%BB%93%E6%9E%84"><span class="nav-number">9.2.</span> <span class="nav-text">中断系统结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">9.3.</span> <span class="nav-text">中断寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8TCON"><span class="nav-number">9.3.1.</span> <span class="nav-text">定时器控制寄存器TCON</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E5%85%81%E8%AE%B8%E5%AF%84%E5%AD%98%E5%99%A8IE"><span class="nav-number">9.3.2.</span> <span class="nav-text">中断允许寄存器IE</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E4%BC%98%E5%85%88%E7%BA%A7%E5%AF%84%E5%AD%98%E5%99%A8IP"><span class="nav-number">9.3.3.</span> <span class="nav-text">中断优先级寄存器IP</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">9.4.</span> <span class="nav-text">中断优先级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">9.5.</span> <span class="nav-text">中断的使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD"><span class="nav-number">10.</span> <span class="nav-text">外部中断</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD0%E2%80%93%E6%8E%A7%E5%88%B6LED"><span class="nav-number">10.1.</span> <span class="nav-text">外部中断0–控制LED</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A4%96%E9%83%A8%E4%B8%AD%E6%96%AD1%E2%80%93%E6%8E%A7%E5%88%B6%E8%9C%82%E9%B8%A3%E5%99%A8"><span class="nav-number">10.2.</span> <span class="nav-text">外部中断1–控制蜂鸣器</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E5%92%8C%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="nav-number">11.</span> <span class="nav-text">定时器和计数器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8%E7%AE%80%E4%BB%8B"><span class="nav-number">11.1.</span> <span class="nav-text">定时器&#x2F;计数器简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">11.2.</span> <span class="nav-text">定时器&#x2F;计数器寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8TCON"><span class="nav-number">11.2.1.</span> <span class="nav-text">控制寄存器TCON</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F%E5%AF%84%E5%AD%98%E5%99%A8TMOD"><span class="nav-number">11.2.2.</span> <span class="nav-text">工作方式寄存器TMOD</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6-%E8%AE%A1%E6%95%B0%E5%99%A82%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8T2CON"><span class="nav-number">11.2.3.</span> <span class="nav-text">定时&#x2F;计数器2控制寄存器T2CON</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="nav-number">11.3.</span> <span class="nav-text">定时器&#x2F;计数器工作方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F0"><span class="nav-number">11.3.1.</span> <span class="nav-text">方式0</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F1"><span class="nav-number">11.3.2.</span> <span class="nav-text">方式1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F2"><span class="nav-number">11.3.3.</span> <span class="nav-text">方式2</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F3"><span class="nav-number">11.3.4.</span> <span class="nav-text">方式3</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8-%E8%AE%A1%E6%95%B0%E5%99%A8%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-number">11.4.</span> <span class="nav-text">定时器&#x2F;计数器使用方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A8%E4%B8%AD%E6%96%AD"><span class="nav-number">12.</span> <span class="nav-text">定时器中断</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A80%E4%B8%AD%E6%96%AD%E2%80%93%E6%8E%A7%E5%88%B6LED"><span class="nav-number">12.1.</span> <span class="nav-text">定时器0中断–控制LED</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9A%E6%97%B6%E5%99%A81%E4%B8%AD%E6%96%AD%E2%80%93%E6%8E%A7%E5%88%B6%E6%95%B0%E7%A0%81%E7%AE%A1"><span class="nav-number">12.2.</span> <span class="nav-text">定时器1中断–控制数码管</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E6%98%93%E4%BA%A4%E9%80%9A%E7%81%AF"><span class="nav-number">13.</span> <span class="nav-text">简易交通灯</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1"><span class="nav-number">14.</span> <span class="nav-text">串口通信</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">14.1.</span> <span class="nav-text">通信的概念</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%B2%E8%A1%8C%E9%80%9A%E4%BF%A1%E4%B8%8E%E5%B9%B6%E8%A1%8C%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.1.</span> <span class="nav-text">串行通信与并行通信</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E4%B8%B2%E8%A1%8C%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.1.1.</span> <span class="nav-text">串行通信</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%B9%B6%E8%A1%8C%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.1.2.</span> <span class="nav-text">并行通信</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1%E4%B8%8E%E5%90%8C%E6%AD%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.2.</span> <span class="nav-text">异步通信与同步通信</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%BC%82%E6%AD%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.2.1.</span> <span class="nav-text">异步通信</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%90%8C%E6%AD%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.2.2.</span> <span class="nav-text">同步通信</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%95%E5%B7%A5%E3%80%81%E5%8D%8A%E5%8F%8C%E5%B7%A5%E4%B8%8E%E5%85%A8%E5%8F%8C%E5%B7%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.3.</span> <span class="nav-text">单工、半双工与全双工通信</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8D%95%E5%B7%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.3.1.</span> <span class="nav-text">单工通信</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8D%8A%E5%8F%8C%E5%B7%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.3.2.</span> <span class="nav-text">半双工通信</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%85%A8%E5%8F%8C%E5%B7%A5%E9%80%9A%E4%BF%A1"><span class="nav-number">14.1.3.3.</span> <span class="nav-text">全双工通信</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E4%BF%A1%E9%80%9F%E7%8E%87"><span class="nav-number">14.1.4.</span> <span class="nav-text">通信速率</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E9%80%9A%E4%BF%A1%E7%AE%80%E4%BB%8B"><span class="nav-number">14.2.</span> <span class="nav-text">串口通信简介</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E7%9B%B8%E5%85%B3%E5%AF%84%E5%AD%98%E5%99%A8"><span class="nav-number">14.3.</span> <span class="nav-text">串口相关寄存器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8SCON"><span class="nav-number">14.3.1.</span> <span class="nav-text">串口控制寄存器SCON</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%94%B5%E6%BA%90%E6%8E%A7%E5%88%B6%E5%AF%84%E5%AD%98%E5%99%A8PCON"><span class="nav-number">14.3.2.</span> <span class="nav-text">电源控制寄存器PCON</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E5%B7%A5%E4%BD%9C%E6%96%B9%E5%BC%8F"><span class="nav-number">14.4.</span> <span class="nav-text">串口工作方式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F0-1"><span class="nav-number">14.4.1.</span> <span class="nav-text">方式0</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F1-1"><span class="nav-number">14.4.2.</span> <span class="nav-text">方式1</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%96%B9%E5%BC%8F2%E5%92%8C%E6%96%B9%E5%BC%8F3"><span class="nav-number">14.4.3.</span> <span class="nav-text">方式2和方式3</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">14.5.</span> <span class="nav-text">串口的使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%B2%E5%8F%A3%E6%A8%A1%E5%9D%97%E7%94%B5%E8%B7%AF"><span class="nav-number">14.6.</span> <span class="nav-text">串口模块电路</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BC%96%E5%86%99%E7%A8%8B%E5%BA%8F-5"><span class="nav-number">14.7.</span> <span class="nav-text">编写程序</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Vikebt</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">16</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">28</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/vikebt" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;vikebt" rel="noopener me" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:2674761561@qq.com" title="E-Mail → mailto:2674761561@qq.com" rel="noopener me" target="_blank"><i class="envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://plus.google.com/oracleboxman" title="Google → https:&#x2F;&#x2F;plus.google.com&#x2F;oracleboxman" rel="noopener me" target="_blank"><i class="google fa-fw"></i>Google</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhoucong.top/2024/06/16/%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A851%E5%8D%95%E7%89%87%E6%9C%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Vikebt">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Vikebt's blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="简单入门51单片机 | Vikebt's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          简单入门51单片机
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2024-06-16 10:20:27" itemprop="dateCreated datePublished" datetime="2024-06-16T10:20:27+08:00">2024-06-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">更新于</span>
      <time title="修改时间：2020-12-07 09:23:02" itemprop="dateModified" datetime="2020-12-07T09:23:02+08:00">2020-12-07</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h3 id="初识51单片机"><a href="#初识51单片机" class="headerlink" title="初识51单片机"></a>初识51单片机</h3><p>我使用的是开拓者提供的51单片机，资料打包如下：</p>
<p><a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1gQ07aX-uIHPLd3xZ4Pa56g">开拓者V2光盘资料</a> 提取码: 85nk </p>
<h4 id="STC89C51RC-RD-系列单片机简介"><a href="#STC89C51RC-RD-系列单片机简介" class="headerlink" title="STC89C51RC&#x2F;RD+系列单片机简介"></a>STC89C51RC&#x2F;RD+系列单片机简介</h4><p>STC89C51RC&#x2F;RD+系列单片机（包括STC89C52RC）是宏晶科技推出的新一代超强抗干扰、高速、低功耗的单片机，与传统8051系列单片机的指令和引脚完全兼容。12时钟&#x2F;机器周期和6时钟&#x2F;机器周期可任意选择。</p>
<h5 id="命名规则"><a href="#命名规则" class="headerlink" title="命名规则"></a>命名规则</h5><p><img src="https://i.loli.net/2020/12/05/eEqtN7Hrz2ZlU6a.png" alt="2.png"></p>
<h5 id="主要特性"><a href="#主要特性" class="headerlink" title="主要特性"></a>主要特性</h5><p><img src="https://i.loli.net/2020/12/05/1ukAirLI7dxbeXj.png" alt="3.png"></p>
<h5 id="引脚封装"><a href="#引脚封装" class="headerlink" title="引脚封装"></a>引脚封装</h5><p><img src="https://i.loli.net/2020/12/05/pGAZv8HeObRUh54.png" alt="4.png"></p>
<h5 id="产品选型表"><a href="#产品选型表" class="headerlink" title="产品选型表"></a>产品选型表</h5><p><img src="https://i.loli.net/2020/12/05/8kacmQiPXFMo1fD.png" alt="5.png"></p>
<h4 id="开发板实物图"><a href="#开发板实物图" class="headerlink" title="开发板实物图"></a>开发板实物图</h4><p><img src="https://i.loli.net/2020/12/05/NEkBiIbgx8SuqA6.jpg" alt="6.jpg"></p>
<p><img src="https://i.loli.net/2020/12/05/yRMpA3JiZanHINW.jpg" alt="7.jpg"></p>
<h3 id="LED灯相关"><a href="#LED灯相关" class="headerlink" title="LED灯相关"></a>LED灯相关</h3><h4 id="LED简介"><a href="#LED简介" class="headerlink" title="LED简介"></a>LED简介</h4><h5 id="LED介绍"><a href="#LED介绍" class="headerlink" title="LED介绍"></a>LED介绍</h5><p>LED即发光二极管，它是一种能将电能转化为光能的半导体电子元件。<br>普通小功率LED电压范围：1.8-2.4V，电流为：20mA</p>
<h5 id="如何点亮LED"><a href="#如何点亮LED" class="headerlink" title="如何点亮LED"></a>如何点亮LED</h5><p>LED具有单向导通性，只能往一个方向导通。正极→负极</p>
<h4 id="LED模块电路"><a href="#LED模块电路" class="headerlink" title="LED模块电路"></a>LED模块电路</h4><p><img src="https://i.loli.net/2020/12/05/bjtzDLiroPOcW4F.png" alt="8.png"></p>
<h4 id="编写程序"><a href="#编写程序" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              LED测试实验												  *</span></span><br><span class="line"><span class="comment">实现现象：依程序设定，使LED灯正常工作</span></span><br><span class="line"><span class="comment">注意事项：无																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;	</span><br><span class="line"></span><br><span class="line">sbit led1=P2^<span class="number">0</span>;	  <span class="comment">//将单片机的P2.0端口定义为led1</span></span><br><span class="line">sbit led2=P2^<span class="number">1</span>;	  <span class="comment">//将单片机的P2.1端口定义为led2</span></span><br><span class="line">sbit led3=P2^<span class="number">2</span>;	  <span class="comment">//将单片机的P2.2端口定义为led3</span></span><br><span class="line">sbit led4=P2^<span class="number">3</span>;	  <span class="comment">//将单片机的P2.3端口定义为led4</span></span><br><span class="line">sbit led5=P2^<span class="number">4</span>;	  <span class="comment">//将单片机的P2.4端口定义为led5</span></span><br><span class="line">sbit led6=P2^<span class="number">5</span>;	  <span class="comment">//将单片机的P2.5端口定义为led6</span></span><br><span class="line">sbit led7=P2^<span class="number">6</span>;	  <span class="comment">//将单片机的P2.6端口定义为led7</span></span><br><span class="line">sbit led8=P2^<span class="number">7</span>;	  <span class="comment">//将单片机的P2.7端口定义为led8</span></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		led1=<span class="number">0</span>,led4=<span class="number">0</span>,led7=<span class="number">0</span>,led8=<span class="number">0</span>; <span class="comment">//点亮红灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms</span></span><br><span class="line">		led1=<span class="number">1</span>,led4=<span class="number">1</span>,led7=<span class="number">1</span>,led8=<span class="number">1</span>;  <span class="comment">//熄灭红灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">		</span><br><span class="line">		led2=<span class="number">0</span>,led5=<span class="number">0</span>;		  <span class="comment">//点亮黄灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms</span></span><br><span class="line">		led2=<span class="number">1</span>,led5=<span class="number">1</span>;		  <span class="comment">//熄灭黄灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">		</span><br><span class="line">		led3=<span class="number">0</span>,led6=<span class="number">0</span>;		  <span class="comment">//点亮绿灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms</span></span><br><span class="line">		led3=<span class="number">1</span>,led6=<span class="number">1</span>;		  <span class="comment">//熄灭绿灯</span></span><br><span class="line">		delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">		</span><br><span class="line">		led1=<span class="number">0</span>,led2=<span class="number">0</span>,led3=<span class="number">0</span>;<span class="comment">//点亮红黄绿</span></span><br><span class="line">		delay(<span class="number">50000</span>);  <span class="comment">//大约延时450ms</span></span><br><span class="line">		led1=<span class="number">1</span>,led2=<span class="number">1</span>,led3=<span class="number">1</span>;<span class="comment">//点亮红黄绿</span></span><br><span class="line">		delay(<span class="number">50000</span>);  <span class="comment">//大约延时450ms</span></span><br><span class="line">		</span><br><span class="line">		led4=<span class="number">0</span>,led5=<span class="number">0</span>,led6=<span class="number">0</span>;<span class="comment">//点亮红黄绿</span></span><br><span class="line">		delay(<span class="number">50000</span>);  <span class="comment">//大约延时450ms</span></span><br><span class="line">		led4=<span class="number">1</span>,led5=<span class="number">1</span>,led6=<span class="number">1</span>;<span class="comment">//点亮红黄绿</span></span><br><span class="line">		delay(<span class="number">50000</span>);  <span class="comment">//大约延时450ms</span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              LED流水灯实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后LED呈现流水灯效果进行左移右移滚动</span></span><br><span class="line"><span class="comment">注意事项：无																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span>		<span class="comment">//因为要用到左右移函数，所以加入这个头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LED P2	   <span class="comment">//将P2口定义为LED 后面就可以使用LED代替P2口</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 i;</span><br><span class="line">	LED=<span class="number">0xfe</span>;</span><br><span class="line">	delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1		<span class="comment">//条件编译  条件不满足不编译//貌似这种方法无法向右移位，所以一般采用使用移位函数的方法进行移位</span></span></span><br><span class="line">		LED=<span class="number">0xfe</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			LED=~(~<span class="number">0xfe</span>&lt;&lt;i);	 <span class="comment">//将0右移i位，然后将结果赋值到P2口//		LED=~(~0x7f&gt;&gt;i);这个达不到与前面一样流水灯的效果</span></span><br><span class="line">			               <span class="comment">//总结：左移时总是移位和补零。右移时无符号数是移位和补零，此时称为逻辑右移;</span></span><br><span class="line">                     <span class="comment">//而有符号数大多数情况下是移位和补最左边的位（也就是补最高有效位），移几位就补几位,此时称为算术右移。</span></span><br><span class="line">			delay(<span class="number">50000</span>);			<span class="comment">//大约延时450ms</span></span><br><span class="line">	</span><br><span class="line">		&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="comment">//如果想要流水从第八个灯开始的话，只能使用移位函数，不然会出现连亮的现象</span></span><br><span class="line"><span class="comment">//		LED=~(~0x7f&lt;&lt;i);         01111111</span></span><br><span class="line"><span class="comment">//														 10000000 取反</span></span><br><span class="line"><span class="comment">//														 1000000	移位</span></span><br><span class="line"><span class="comment">//														 11000000 补最左边数的位</span></span><br><span class="line"><span class="comment">//														 00111111 再取反</span></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 0						 <span class="comment">//条件满足进行编译</span></span></span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)	 <span class="comment">//将led左移一位  11111110</span></span><br><span class="line">		&#123;</span><br><span class="line">			LED=_crol_(LED,<span class="number">1</span>);<span class="comment">//_cror_</span></span><br><span class="line">			delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">7</span>;i++)	<span class="comment">//将led右移一位</span></span><br><span class="line">		&#123;</span><br><span class="line">			LED=_cror_(LED,<span class="number">1</span>);</span><br><span class="line">			delay(<span class="number">50000</span>); <span class="comment">//大约延时450ms	</span></span><br><span class="line">		&#125; </span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="蜂鸣器报警"><a href="#蜂鸣器报警" class="headerlink" title="蜂鸣器报警"></a>蜂鸣器报警</h3><h4 id="蜂鸣器简介"><a href="#蜂鸣器简介" class="headerlink" title="蜂鸣器简介"></a>蜂鸣器简介</h4><p>蜂鸣器主要分为压电式蜂鸣器和电磁式蜂鸣器两种类型。<br>（1）压电式蜂鸣器主要由多谐振荡器、压电蜂鸣片、阻抗匹配器及共鸣箱、外壳等组成。多谐振荡器由晶体管或集成电路构成，当接通电源后（1.5~15V直流工作电压），多谐振荡器起振,输出1.5～5kHZ的音频信号，阻抗匹配器推动压电蜂鸣片发声。<br>（2）电磁式蜂鸣器由振荡器、电磁线圈、磁铁、振动膜片及外壳等组成。接通电源后，振荡器产生的音频信号电流通过电磁线圈，使电磁线圈产生磁场，振动膜片在电磁线圈和磁铁的相互作用下，周期性地振动发声。   </p>
<p>如何调节蜂鸣器发声音色及声音大小？<br>（1）改变单片机引脚输出波形的频率，就可以调整控制蜂鸣器音调，产生各种不同音色、音调的声音。<br>（2）改变输出的高低电平占空比，则可以控制蜂鸣器的声音大小。</p>
<h4 id="蜂鸣器模块电路"><a href="#蜂鸣器模块电路" class="headerlink" title="蜂鸣器模块电路"></a>蜂鸣器模块电路</h4><p><img src="https://i.loli.net/2020/12/06/XJaqRoG6pVN1gCf.png" alt="9.png"></p>
<h4 id="编写程序-1"><a href="#编写程序-1" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              蜂鸣器报警实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后蜂鸣器发声</span></span><br><span class="line"><span class="comment">注意事项：无																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span>		<span class="comment">//因为要用到左右移函数，所以加入这个头文件</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit beep=P1^<span class="number">5</span>;	   </span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line">		beep=~beep;</span><br><span class="line">		delay(<span class="number">50</span>); <span class="comment">//通过修改此延时时间达到不同的发声效果</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="数码管相关–74HC245"><a href="#数码管相关–74HC245" class="headerlink" title="数码管相关–74HC245"></a>数码管相关–74HC245</h3><h4 id="数码管简介"><a href="#数码管简介" class="headerlink" title="数码管简介"></a>数码管简介</h4><p>数码管是一种半导体发光器件，其基本单元是发光二极管。数码管也称为LED数码管，是由多个发光二极管封装在一起组成“8”字型的器件，引线已在内部连接完成，只需引出它们的各个笔划，公共电极。</p>
<p>LED数码管根据LED的不同接法可以分为2类：共阴数码管和共阳数码管。</p>
<p>如下图（b），左为共阴数码管，右为共阳数码管。</p>
<p><img src="https://i.loli.net/2020/12/06/czEyhjme6GBbSt8.png" alt="10.png"></p>
<p>  共阴数码管码表</p>
<p>0x3f, 0x06, 0x5b, 0x4f, 0x66, 0x6d,</p>
<p> 0   1   2   3   4   5</p>
<p>0x7d, 0x07, 0x7f, 0x6f, 0x77, 0x7c,</p>
<p> 6   7   8   9   A   B</p>
<p>0x39, 0x5e, 0x79, 0x71, 0x00,</p>
<p> C   D   E   F  无显示</p>
<p>  共阳数码管码表</p>
<p>0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92,</p>
<p> 0   1   2   3   4   5</p>
<p>0x82, 0xF8, 0x80, 0x90, 0x88, 0x83,</p>
<p> 6   7   8   9   A   B</p>
<p>0xC6, 0xA1, 0x86, 0x8E, 0xFF,</p>
<p>C   D   E   F  无显示</p>
<h4 id="数码管模块电路"><a href="#数码管模块电路" class="headerlink" title="数码管模块电路"></a>数码管模块电路</h4><p><img src="https://i.loli.net/2020/12/06/p2qFLnlsf4yvYzN.png" alt="11.png"></p>
<h4 id="程序编写"><a href="#程序编写" class="headerlink" title="程序编写"></a>程序编写</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              数码管静态显示实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后数码管静态显示我的生日。</span></span><br><span class="line"><span class="comment">注意事项：将LED点阵模块的J1短接片短接到VCC端																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit LSA=P3^<span class="number">0</span>;	 <span class="comment">//38译码器控制引脚</span></span><br><span class="line">sbit LSB=P3^<span class="number">1</span>;</span><br><span class="line">sbit LSC=P3^<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">u8 code smgduan[<span class="number">17</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,</span><br><span class="line">					<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;<span class="comment">//显示0~F的值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	<span class="comment">//</span></span><br><span class="line">&#125;					</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">2</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">1</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">7</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">2</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">5</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">2</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">1</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">0</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">7</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">2</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;	<span class="comment">//控制38译码器的Y0输出低电平</span></span><br><span class="line">	P0=smgduan[<span class="number">5</span>];</span><br><span class="line">	delay(<span class="number">50000</span>);</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              数码管动态显示实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后数码管从左至右显示0-7。</span></span><br><span class="line"><span class="comment">注意事项：将LED点阵模块的J1短接片短接到VCC端																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit LSA=P3^<span class="number">0</span>;</span><br><span class="line">sbit LSB=P3^<span class="number">1</span>;</span><br><span class="line">sbit LSC=P3^<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">u8 code smgduan[<span class="number">17</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,</span><br><span class="line">					<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;<span class="comment">//显示0~F的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : DigDisplay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 数码管动态扫描函数，循环扫描8个数码管显示</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">DigDisplay</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 i;</span><br><span class="line">	<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">switch</span>(i)	 <span class="comment">//位选，选择点亮的数码管，</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">case</span>(<span class="number">0</span>):</span><br><span class="line">				LSA=<span class="number">0</span>;LSB=<span class="number">0</span>;LSC=<span class="number">0</span>; <span class="keyword">break</span>;<span class="comment">//显示第0位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">1</span>):</span><br><span class="line">				LSA=<span class="number">1</span>;LSB=<span class="number">0</span>;LSC=<span class="number">0</span>; <span class="keyword">break</span>;<span class="comment">//显示第1位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">2</span>):</span><br><span class="line">				LSA=<span class="number">0</span>;LSB=<span class="number">1</span>;LSC=<span class="number">0</span>; <span class="keyword">break</span>;<span class="comment">//显示第2位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">3</span>):</span><br><span class="line">				LSA=<span class="number">1</span>;LSB=<span class="number">1</span>;LSC=<span class="number">0</span>; <span class="keyword">break</span>;<span class="comment">//显示第3位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">4</span>):</span><br><span class="line">				LSA=<span class="number">0</span>;LSB=<span class="number">0</span>;LSC=<span class="number">1</span>; <span class="keyword">break</span>;<span class="comment">//显示第4位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">5</span>):</span><br><span class="line">				LSA=<span class="number">1</span>;LSB=<span class="number">0</span>;LSC=<span class="number">1</span>; <span class="keyword">break</span>;<span class="comment">//显示第5位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">6</span>):</span><br><span class="line">				LSA=<span class="number">0</span>;LSB=<span class="number">1</span>;LSC=<span class="number">1</span>; <span class="keyword">break</span>;<span class="comment">//显示第6位</span></span><br><span class="line">			<span class="keyword">case</span>(<span class="number">7</span>):</span><br><span class="line">				LSA=<span class="number">1</span>;LSB=<span class="number">1</span>;LSC=<span class="number">1</span>; <span class="keyword">break</span>;<span class="comment">//显示第7位	</span></span><br><span class="line">		&#125;</span><br><span class="line">		P0=smgduan[i];<span class="comment">//发送段码</span></span><br><span class="line">		delay(<span class="number">100</span>); <span class="comment">//间隔一段时间扫描	全部显示</span></span><br><span class="line">		<span class="comment">//delay(1000);    闪烁</span></span><br><span class="line">		P0=<span class="number">0x00</span>;<span class="comment">//消隐</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line">		DigDisplay();  <span class="comment">//数码管显示函数	</span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="独立按键"><a href="#独立按键" class="headerlink" title="独立按键"></a>独立按键</h3><h4 id="按键简介"><a href="#按键简介" class="headerlink" title="按键简介"></a>按键简介</h4><p>按键是一种电子开关，使用时轻轻按下开关按钮就可使开关接</p>
<p>通，当松开手时,开关断开。</p>
<p><img src="https://i.loli.net/2020/12/06/G9MAo5rs3JHRXCn.png" alt="12.png"></p>
<p>通常的按键所用开关为机械弹性开关,当机械触点断开 、闭合</p>
<p>时，电压信号如下：</p>
<p><img src="https://i.loli.net/2020/12/06/Gc8dxJ541k3PmXl.png" alt="13.png"></p>
<h4 id="独立按键模块电路"><a href="#独立按键模块电路" class="headerlink" title="独立按键模块电路"></a>独立按键模块电路</h4><p><img src="https://i.loli.net/2020/12/06/yVR1zuKLsj7T5gJ.png" alt="14.png"></p>
<h4 id="程序编写-1"><a href="#程序编写-1" class="headerlink" title="程序编写"></a>程序编写</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              独立按键实验												  *</span></span><br><span class="line"><span class="comment">实现现象：四个独立按键分别控制一个LED的状态</span></span><br><span class="line"><span class="comment">注意事项：无																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit k1=P1^<span class="number">4</span>;		<span class="comment">//定义P14口是k1</span></span><br><span class="line">sbit k2=P1^<span class="number">6</span>;		<span class="comment">//定义P16口是k2</span></span><br><span class="line">sbit k3=P3^<span class="number">2</span>;		<span class="comment">//定义P32口是k3</span></span><br><span class="line">sbit k4=P1^<span class="number">7</span>;		<span class="comment">//定义P17口是k4</span></span><br><span class="line"></span><br><span class="line">sbit led1=P2^<span class="number">0</span>;		<span class="comment">//定义P20口是led1</span></span><br><span class="line">sbit led2=P2^<span class="number">1</span>;		<span class="comment">//定义P21口是led2</span></span><br><span class="line">sbit led3=P2^<span class="number">2</span>;		<span class="comment">//定义P22口是led3</span></span><br><span class="line">sbit led4=P2^<span class="number">3</span>;		<span class="comment">//定义P23口是led4</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : keypros</span></span><br><span class="line"><span class="comment">* 函数功能		   : 按键处理函数，判断按键K1是否按下</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">keypros</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">if</span>(k1==<span class="number">0</span>)		  <span class="comment">//检测按键K1是否按下</span></span><br><span class="line">	&#123;	</span><br><span class="line">		delay(<span class="number">1000</span>);   <span class="comment">//消除抖动 一般大约10ms</span></span><br><span class="line">		<span class="keyword">if</span>(k1==<span class="number">0</span>)	 <span class="comment">//再次判断按键是否按下</span></span><br><span class="line">		&#123; </span><br><span class="line">	  	led1=~led1;	  <span class="comment">//led状态取反</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(!k1);	 <span class="comment">//检测按键是否松开</span></span><br><span class="line">	&#125;	</span><br><span class="line">	</span><br><span class="line">  	<span class="keyword">if</span>(k2==<span class="number">0</span>)		  <span class="comment">//检测按键K1是否按下</span></span><br><span class="line">	&#123;	</span><br><span class="line">		delay(<span class="number">1000</span>);   <span class="comment">//消除抖动 一般大约10ms</span></span><br><span class="line">		<span class="keyword">if</span>(k2==<span class="number">0</span>)	 <span class="comment">//再次判断按键是否按下</span></span><br><span class="line">		&#123; </span><br><span class="line">	  	led2=~led2;	  <span class="comment">//led状态取反</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(!k2);	 <span class="comment">//检测按键是否松开</span></span><br><span class="line">	&#125;	</span><br><span class="line">	</span><br><span class="line">	 <span class="keyword">if</span>(k3==<span class="number">0</span>)		  <span class="comment">//检测按键K1是否按下</span></span><br><span class="line">	&#123;	</span><br><span class="line">		delay(<span class="number">1000</span>);   <span class="comment">//消除抖动 一般大约10ms</span></span><br><span class="line">		<span class="keyword">if</span>(k3==<span class="number">0</span>)	 <span class="comment">//再次判断按键是否按下</span></span><br><span class="line">		&#123; </span><br><span class="line">	  	led3=~led3;	  <span class="comment">//led状态取反</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(!k3);	 <span class="comment">//检测按键是否松开</span></span><br><span class="line">	&#125;	</span><br><span class="line">	</span><br><span class="line">	  <span class="keyword">if</span>(k4==<span class="number">0</span>)		  <span class="comment">//检测按键K1是否按下</span></span><br><span class="line">	&#123;	</span><br><span class="line">		delay(<span class="number">1000</span>);   <span class="comment">//消除抖动 一般大约10ms</span></span><br><span class="line">		<span class="keyword">if</span>(k4==<span class="number">0</span>)	 <span class="comment">//再次判断按键是否按下</span></span><br><span class="line">		&#123; </span><br><span class="line">	  	led4=~led4;	  <span class="comment">//led状态取反</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">while</span>(!k4);	 <span class="comment">//检测按键是否松开</span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line">		keypros();  <span class="comment">//按键处理函数	</span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="矩阵按键-4X4"><a href="#矩阵按键-4X4" class="headerlink" title="矩阵按键(4X4)"></a>矩阵按键(4X4)</h3><h4 id="4X4矩阵按键简介"><a href="#4X4矩阵按键简介" class="headerlink" title="4X4矩阵按键简介"></a>4X4矩阵按键简介</h4><p>​		在键盘中按键数量较多时，为了减少I&#x2F;O口的占用，通常将按键<br>排列成矩阵形式。在矩阵式键盘中，每条水平线和垂直线在交叉处<br>不直接连通，而是通过一个按键加以连接。</p>
<p>矩阵按键识别方法：<br>（1）逐行扫描<br>      可以通过高四位轮流输出低电平来对矩阵键盘进行逐行<br>扫描，当低四位接收到的数据不全为1的时候，说明有按键按下，<br>然后通过接收到的数据是哪一位为0来判断是哪一个按键被按下。<br>（2）行列扫描<br>      可以通过高四位全部输出低电平，低四位输出高电平。当接收到的数据，低四位<br>不全为高电平时，说明有按键按下，然后通过接收的数据值，判断是哪一列有按键<br>按下，然后再反过来，高四位输出高电平，低四位输出低电平，然后根据接收到的高四位的<br>值判断是那一行有按键按下，这样就能够确定是哪一个按键按下了。</p>
<h4 id="4X4矩阵按键模块电路"><a href="#4X4矩阵按键模块电路" class="headerlink" title="4X4矩阵按键模块电路"></a>4X4矩阵按键模块电路</h4><p><img src="https://i.loli.net/2020/12/06/8UnxjIoEHB3YKtC.png" alt="15.png"></p>
<h4 id="编写程序-2"><a href="#编写程序-2" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              矩阵按键实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后数码管显示0，按下矩阵按键上的按键显示对应的数字</span></span><br><span class="line"><span class="comment">			S1-S4：0-3</span></span><br><span class="line"><span class="comment">			S5-S8：4-7</span></span><br><span class="line"><span class="comment">			S9-S12：8-B</span></span><br><span class="line"><span class="comment">			S13-S16：C-F</span></span><br><span class="line"><span class="comment">注意事项：																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_DIG P0	  </span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> GPIO_KEY P1</span></span><br><span class="line"></span><br><span class="line">sbit LSA=P3^<span class="number">0</span>;</span><br><span class="line">sbit LSB=P3^<span class="number">1</span>;</span><br><span class="line">sbit LSC=P3^<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">u8 KeyValue;	<span class="comment">//用来存放读取到的键值</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">u8 code smgduan[<span class="number">17</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,</span><br><span class="line">					<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;<span class="comment">//显示0~F的值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : KEY_Scan</span></span><br><span class="line"><span class="comment">* 函数功能		   : 检测按键是否按下并读取键值</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">KEY_Scan</span><span class="params">(<span class="type">void</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">char</span> a=<span class="number">0</span>;</span><br><span class="line">	GPIO_KEY=<span class="number">0x0f</span>;</span><br><span class="line">	<span class="keyword">if</span>(GPIO_KEY!=<span class="number">0x0f</span>)<span class="comment">//读取按键是否按下</span></span><br><span class="line">	&#123;</span><br><span class="line">		delay(<span class="number">1000</span>);<span class="comment">//延时10ms进行消抖</span></span><br><span class="line">		<span class="keyword">if</span>(GPIO_KEY!=<span class="number">0x0f</span>)<span class="comment">//再次检测键盘是否按下</span></span><br><span class="line">		&#123;	</span><br><span class="line">			<span class="comment">//测试列</span></span><br><span class="line">			GPIO_KEY=<span class="number">0X0F</span>;</span><br><span class="line">			<span class="keyword">switch</span>(GPIO_KEY)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0X07</span>):	KeyValue=<span class="number">0</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0X0b</span>):	KeyValue=<span class="number">1</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0X0d</span>): KeyValue=<span class="number">2</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0X0e</span>):	KeyValue=<span class="number">3</span>;<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="comment">//测试行</span></span><br><span class="line">			GPIO_KEY=<span class="number">0XF0</span>;</span><br><span class="line">			<span class="keyword">switch</span>(GPIO_KEY)</span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0X70</span>):	KeyValue=KeyValue;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0Xb0</span>):	KeyValue=KeyValue+<span class="number">4</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0Xd0</span>): KeyValue=KeyValue+<span class="number">8</span>;<span class="keyword">break</span>;</span><br><span class="line">				<span class="keyword">case</span>(<span class="number">0Xe0</span>):	KeyValue=KeyValue+<span class="number">12</span>;<span class="keyword">break</span>;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">while</span>((a&lt;<span class="number">50</span>)&amp;&amp;(GPIO_KEY!=<span class="number">0xf0</span>))	 <span class="comment">//检测按键松手检测，防止占用CPU</span></span><br><span class="line">			&#123;</span><br><span class="line">				delay(<span class="number">1000</span>);</span><br><span class="line">				a++;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	LSA=<span class="number">0</span>; <span class="comment">//给一个数码管提供位选</span></span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line">		KEY_Scan();		   <span class="comment">//按键判断函数</span></span><br><span class="line">		GPIO_DIG=smgduan[KeyValue];	  <span class="comment">//</span></span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="点阵（8X8）–74HC595"><a href="#点阵（8X8）–74HC595" class="headerlink" title="点阵（8X8）–74HC595"></a>点阵（8X8）–74HC595</h3><h4 id="8X8LED点阵简介"><a href="#8X8LED点阵简介" class="headerlink" title="8X8LED点阵简介"></a>8X8LED点阵简介</h4><p>LED点阵是由发光二极管排列组成的显示器件,在我们日常生活的电器中随处可见，被广泛应用于汽车报站器，广告屏等。</p>
<p><img src="https://i.loli.net/2020/12/06/HgnKmUIsxOVa853.png" alt="16.png"></p>
<p>8*8LED点阵内部结构：</p>
<p><img src="https://i.loli.net/2020/12/06/z8edNqnhEp9xmJl.png" alt="17.png"></p>
<h4 id="8X8LED点阵模块电路"><a href="#8X8LED点阵模块电路" class="headerlink" title="8X8LED点阵模块电路"></a>8X8LED点阵模块电路</h4><p><img src="https://i.loli.net/2020/12/06/tFXHRcvlgIpM4Zh.png" alt="18.png"></p>
<h4 id="编写程序-3"><a href="#编写程序-3" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              8*8点阵--点亮一个点实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后点阵从左上角第一个点亮，沿一条对角线等比例点亮，直至全亮</span></span><br><span class="line"><span class="comment">			</span></span><br><span class="line"><span class="comment">注意事项：一定要将LED点阵模块上的J1短接片短接到GND端</span></span><br><span class="line"><span class="comment">			数码管的段选和点阵列共用P0口，而38译码器默认是Y7输出，即数码管最后一个会点亮																			  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg51.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit SRCLK=P3^<span class="number">6</span>;</span><br><span class="line">sbit RCLK=P3^<span class="number">5</span>;</span><br><span class="line">sbit SER=P3^<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函数名         : HC595SendByte(u8 dat)</span></span><br><span class="line"><span class="comment">* 函数功能		   : 向74HC595发送一个字节的数据</span></span><br><span class="line"><span class="comment">* 输入           : 无</span></span><br><span class="line"><span class="comment">* 输出         	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HC595SendByte</span><span class="params">(u8 dat)</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 a;</span><br><span class="line">	SRCLK=<span class="number">0</span>;</span><br><span class="line">	RCLK=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(a=<span class="number">0</span>;a&lt;<span class="number">8</span>;a++)</span><br><span class="line">	&#123;</span><br><span class="line">		SER=dat&gt;&gt;<span class="number">7</span>;</span><br><span class="line">		dat&lt;&lt;=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		SRCLK=<span class="number">1</span>;</span><br><span class="line">		_nop_();</span><br><span class="line">		_nop_();</span><br><span class="line">		SRCLK=<span class="number">0</span>;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	RCLK=<span class="number">1</span>;</span><br><span class="line">	_nop_();</span><br><span class="line">	_nop_();</span><br><span class="line">	RCLK=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;			</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		HC595SendByte(<span class="number">0x80</span>);   <span class="comment">//74HC595控制点阵行</span></span><br><span class="line">		P0=<span class="number">0x7f</span>;			   <span class="comment">//P0控制点阵列</span></span><br><span class="line">		delay(<span class="number">50000</span>);</span><br><span class="line">		HC595SendByte(<span class="number">0XC0</span>);</span><br><span class="line">		P0=<span class="number">0X3f</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);</span><br><span class="line">		HC595SendByte(<span class="number">0XE0</span>);</span><br><span class="line">        P0=<span class="number">0X1f</span>;	</span><br><span class="line">		delay(<span class="number">50000</span>);</span><br><span class="line">		HC595SendByte(<span class="number">0XF0</span>);</span><br><span class="line">        P0=<span class="number">0X0f</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);</span><br><span class="line">		HC595SendByte(<span class="number">0XF8</span>);</span><br><span class="line">        P0=<span class="number">0X07</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);			</span><br><span class="line">		HC595SendByte(<span class="number">0XFC</span>);</span><br><span class="line">        P0=<span class="number">0X03</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);			</span><br><span class="line">		HC595SendByte(<span class="number">0XFE</span>);</span><br><span class="line">        P0=<span class="number">0X01</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);		</span><br><span class="line">		HC595SendByte(<span class="number">0XFF</span>);</span><br><span class="line">        P0=<span class="number">0X00</span>;</span><br><span class="line">		delay(<span class="number">50000</span>);			</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              8*8点阵--显示数字实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后点阵上显示数字0（或1）</span></span><br><span class="line"><span class="comment">			</span></span><br><span class="line"><span class="comment">注意事项：一定要将LED点阵模块上的J1短接片短接到GND端																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg51.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit SRCLK=P3^<span class="number">6</span>;</span><br><span class="line">sbit RCLK=P3^<span class="number">5</span>;</span><br><span class="line">sbit SER=P3^<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">u8 ledduan0[]=&#123;<span class="number">0X00</span>,<span class="number">0X00</span>,<span class="number">0X3E</span>,<span class="number">0X41</span>,<span class="number">0X41</span>,<span class="number">0X41</span>,<span class="number">0X3E</span>,<span class="number">0X00</span>&#125;;</span><br><span class="line">u8 ledduan1[]=&#123;<span class="number">0X00</span>,<span class="number">0X00</span>,<span class="number">0X24</span>,<span class="number">0X44</span>,<span class="number">0XFC</span>,<span class="number">0X04</span>,<span class="number">0X04</span>,<span class="number">0X00</span>&#125;;</span><br><span class="line">u8 ledwei[]=&#123;<span class="number">0X7f</span>,<span class="number">0Xbf</span>,<span class="number">0Xdf</span>,<span class="number">0Xef</span>,<span class="number">0Xf7</span>,<span class="number">0Xfb</span>,<span class="number">0Xfd</span>,<span class="number">0Xfe</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函数名         : HC595SendByte(u8 dat)</span></span><br><span class="line"><span class="comment">* 函数功能		   : 向74HC595发送一个字节的数据</span></span><br><span class="line"><span class="comment">* 输入           : 无</span></span><br><span class="line"><span class="comment">* 输出         	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">HC595SendByte</span><span class="params">(u8 dat)</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 a;</span><br><span class="line">	SRCLK=<span class="number">0</span>;</span><br><span class="line">	RCLK=<span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span>(a=<span class="number">0</span>;a&lt;<span class="number">8</span>;a++)</span><br><span class="line">	&#123;</span><br><span class="line">		SER=dat&gt;&gt;<span class="number">7</span>;</span><br><span class="line">		dat&lt;&lt;=<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">		SRCLK=<span class="number">1</span>;</span><br><span class="line">		_nop_();</span><br><span class="line">		_nop_();</span><br><span class="line">		SRCLK=<span class="number">0</span>;	</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	RCLK=<span class="number">1</span>;</span><br><span class="line">	_nop_();</span><br><span class="line">	_nop_();</span><br><span class="line">	RCLK=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	u8 i,j;</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		P0=<span class="number">0x7f</span>;</span><br><span class="line">		<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++)</span><br><span class="line">		&#123;</span><br><span class="line">			P0=ledwei[i];</span><br><span class="line">			HC595SendByte(ledduan0[i]);</span><br><span class="line">			delay(<span class="number">100</span>);</span><br><span class="line">			HC595SendByte(<span class="number">0X00</span>);	</span><br><span class="line">		&#125;                                    <span class="comment">//显示数字0</span></span><br><span class="line"><span class="comment">//			for(j=0;j&lt;8;j++)</span></span><br><span class="line"><span class="comment">//		&#123;</span></span><br><span class="line"><span class="comment">//			P0=ledwei[j];</span></span><br><span class="line"><span class="comment">//			HC595SendByte(ledduan1[j]);</span></span><br><span class="line"><span class="comment">//			delay(100);</span></span><br><span class="line"><span class="comment">//			HC595SendByte(0X00);</span></span><br><span class="line"><span class="comment">//		&#125;                                    //显示数字1</span></span><br><span class="line"><span class="comment">//				</span></span><br><span class="line">	&#125;			</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="直流电机控制–TC1508S"><a href="#直流电机控制–TC1508S" class="headerlink" title="直流电机控制–TC1508S"></a>直流电机控制–TC1508S</h3><h4 id="直流电机简介"><a href="#直流电机简介" class="headerlink" title="直流电机简介"></a>直流电机简介</h4><p>直流电机是指能将直流电能转换成机械能的旋转电机。</p>
<p>相关参数：</p>
<p> 轴长：8mm</p>
<p> 轴径：2mm</p>
<p> 电压：1-6v</p>
<p> 参考电流：0.35-0.4A</p>
<p> 3v转速：17000-18000转每分钟</p>
<h4 id="直流电机驱动模块电路"><a href="#直流电机驱动模块电路" class="headerlink" title="直流电机驱动模块电路"></a>直流电机驱动模块电路</h4><p><img src="https://i.loli.net/2020/12/06/VzPjuSA1Zkv69K5.png" alt="19.png"></p>
<h4 id="编写程序-4"><a href="#编写程序-4" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              直流电机控制实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后，将直流电机引脚两端连接在电机驱动模块的A-和A+上，</span></span><br><span class="line"><span class="comment">			通过按键K1控制直流电机开启和停止	</span></span><br><span class="line"><span class="comment">注意事项：																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg51.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;intrins.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit motoa=P1^<span class="number">0</span>;	<span class="comment">//OUTA输出</span></span><br><span class="line">sbit motob=P1^<span class="number">1</span>;	<span class="comment">//OUTB输出</span></span><br><span class="line">sbit k1=P3^<span class="number">0</span>;  <span class="comment">//按键K1</span></span><br><span class="line"></span><br><span class="line">u8 mode=<span class="number">0</span>;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;			</span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;	</span><br><span class="line">		<span class="keyword">if</span>(k1==<span class="number">0</span>)		<span class="comment">//判断K1是否按下</span></span><br><span class="line">		&#123;</span><br><span class="line">			delay(<span class="number">1000</span>);	<span class="comment">//消抖</span></span><br><span class="line">			<span class="keyword">if</span>(k1==<span class="number">0</span>)	   <span class="comment">//再次判断K1是否按下</span></span><br><span class="line">			&#123;</span><br><span class="line">				mode++;</span><br><span class="line">				<span class="keyword">if</span>(mode==<span class="number">2</span>)mode=<span class="number">0</span>;		</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">while</span>(!k1);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(mode==<span class="number">0</span>)	  <span class="comment">//停止</span></span><br><span class="line">		&#123;</span><br><span class="line">			motoa=<span class="number">0</span>;</span><br><span class="line">			motob=<span class="number">0</span>;	</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="keyword">if</span>(mode==<span class="number">1</span>)  <span class="comment">//开启</span></span><br><span class="line">		&#123;</span><br><span class="line">			motoa=<span class="number">0</span>;</span><br><span class="line">			motob=<span class="number">1</span>;		</span><br><span class="line">		&#125;</span><br><span class="line">						</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="中断系统"><a href="#中断系统" class="headerlink" title="中断系统"></a>中断系统</h3><h4 id="中断简介"><a href="#中断简介" class="headerlink" title="中断简介"></a>中断简介</h4><p><img src="https://i.loli.net/2020/12/06/Mk8CZTAsRc3bE5X.png" alt="20.png"></p>
<p>中断技术不仅解决了快速主机与慢速I&#x2F;O设备的数据传送问题，而且还具有如下优点：</p>
<p> ①分时操作。CPU可以分时为多个I&#x2F;O设备服务，提高了计算机的利用率；</p>
<p> ②实时响应。CPU能够及时处理应用系统的随机事件，系统的实时性大大增强；</p>
<p> ③可靠性高。CPU具有处理设备故障及掉电等突发性事件能力，从而使系统可靠性提高。</p>
<h4 id="中断系统结构"><a href="#中断系统结构" class="headerlink" title="中断系统结构"></a>中断系统结构</h4><p>89C51的中断系统有5个中断源 ，2个优先级，可实现二级中断嵌套。 </p>
<p><img src="https://i.loli.net/2020/12/06/CcZieDxOsVRmj1E.png" alt="21.png"></p>
<p> ①INT0(P3.2)，可由IT0(TCON.0)选择其为低电平有效还是下降沿有效。当CPU检测</p>
<p>到P3.2引脚上出现有效的中断信号时，中断标志IE0(TCON.1)置1，向CPU申请中断。 </p>
<p> ②INT1(P3.3)，可由IT1(TCON.2)选择其为低电平有效还是下降沿有效。当CPU检测</p>
<p>到P3.3引脚上出现有效的中断信号时，中断标志IE1(TCON.3)置1，向CPU申请中断。</p>
<p> ③T0(P3.4)，TF0（TCON.5），片内定时&#x2F;计数器T0溢出中断请求标志。当定时&#x2F;计</p>
<p>数器T0发生溢出时，置位TF0，并向CPU申请中断。</p>
<p> ④T1(P3.5)，TF1（TCON.7），片内定时&#x2F;计数器T1溢出中断请求标志。当定时&#x2F;计</p>
<p>数器T1发生溢出时，置位TF1，并向CPU申请中断。</p>
<p> ⑤RI（SCON.0）或TI（SCON.1），串行口中断请求标志。当串行口接收完一帧串行</p>
<p>数据时置位RI或当串行口发送完一帧串行数据时置位TI，向CPU申请中断。</p>
<p><img src="https://i.loli.net/2020/12/06/Ev2gFBKZzpMXDQN.png" alt="22.png"></p>
<h4 id="中断寄存器"><a href="#中断寄存器" class="headerlink" title="中断寄存器"></a>中断寄存器</h4><h5 id="定时器控制寄存器TCON"><a href="#定时器控制寄存器TCON" class="headerlink" title="定时器控制寄存器TCON"></a>定时器控制寄存器TCON</h5><p><img src="https://i.loli.net/2020/12/06/4TgwqaYFHU5m3z9.png" alt="22-1.png"></p>
<p>IT0：外部中断0触发方式控制位。当IT0&#x3D;0时，为电平触发方式。当IT0&#x3D;1时，为边沿触发方式（下降沿有效）。</p>
<p>IE0：外部中断0中断请求标志位。</p>
<p>IT1：外部中断1触发方式控制位。</p>
<p>IE1：外部中断1中断请求标志位。</p>
<p>TF0：定时&#x2F;计数器T0溢出中断请求标志位。</p>
<p>TF1：定时&#x2F;计数器T1溢出中断请求标志位。 </p>
<h5 id="中断允许寄存器IE"><a href="#中断允许寄存器IE" class="headerlink" title="中断允许寄存器IE"></a>中断允许寄存器IE</h5><p><img src="https://i.loli.net/2020/12/06/xNEmKunZfzbFh5I.png" alt="22-2.png"></p>
<p>EX0：外部中断0允许位；</p>
<p>ET0：定时&#x2F;计数器T0中断允许位； </p>
<p>EX1：外部中断0允许位；</p>
<p>ET1：定时&#x2F;计数器T1中断允许位；</p>
<p>ES： 串行口中断允许位；</p>
<p>EA ：CPU中断允许（总允许）位</p>
<h5 id="中断优先级寄存器IP"><a href="#中断优先级寄存器IP" class="headerlink" title="中断优先级寄存器IP"></a>中断优先级寄存器IP</h5><p><img src="https://i.loli.net/2020/12/06/ECk8IiexO5vrgLB.png" alt="22-3.png">PT2：定时器&#x2F;计数器2中断优先级控制位（仅8052）；1：高优先级，0：低优先级</p>
<p>PS：串行口优先级控制位；1：高优先级，0：低优先级</p>
<p>PT0&#x2F;PT1：定时器&#x2F;计数器0&#x2F;1中断优先级控制位；1：高优先级，0：低优先级 </p>
<p>PX0&#x2F;PX1：外部中断管0&#x2F;1中断优先级控制位；1：高优先级，0：低优先级</p>
<h4 id="中断优先级"><a href="#中断优先级" class="headerlink" title="中断优先级"></a>中断优先级</h4><p>同一优先级中的中断申请不止一个时，则有中断优先权排队问题。</p>
<p>同一优先级的中断优先权排队，由中断系统硬件确定的自然优先级</p>
<p>决定。</p>
<p><img src="https://i.loli.net/2020/12/06/7FJHPxWafsZtIiq.png" alt="23.png"></p>
<p> *中断执行原则： </p>
<p>①CPU同时接收到几个中断时，首先响应优先级别最高的中断请求。</p>
<p>②正在进行的中断过程不能被新的同级或低优先级的中断请求所中</p>
<p>断。</p>
<p>③正在进行的低优先级中断服务，能被高优先级中断请求所中断。</p>
<h4 id="中断的使用"><a href="#中断的使用" class="headerlink" title="中断的使用"></a>中断的使用</h4><p>中断响应条件</p>
<p> ①中断源要有中断请求</p>
<p> ②中断源的中断允许位为1</p>
<p> ③打开总中断（即EA&#x3D;1）</p>
<h3 id="外部中断"><a href="#外部中断" class="headerlink" title="外部中断"></a>外部中断</h3><h4 id="外部中断0–控制LED"><a href="#外部中断0–控制LED" class="headerlink" title="外部中断0–控制LED"></a>外部中断0–控制LED</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              外部中断0--控制LED实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后按下K3按键可以对D1小灯状态取反。</span></span><br><span class="line"><span class="comment">注意事项：无。																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit k3=P3^<span class="number">2</span>;  <span class="comment">//定义按键K3</span></span><br><span class="line">sbit led=P2^<span class="number">0</span>;	 <span class="comment">//定义P20口是led</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Int1Init()</span></span><br><span class="line"><span class="comment">* 函数功能		   : 设置外部中断1</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Int0Init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//设置INT0</span></span><br><span class="line">	IT0=<span class="number">1</span>;<span class="comment">//跳变沿出发方式（下降沿）</span></span><br><span class="line">	EX0=<span class="number">1</span>;<span class="comment">//打开INT0的中断允许。	</span></span><br><span class="line">	EA=<span class="number">1</span>;<span class="comment">//打开总中断	</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	Int0Init();  <span class="comment">//	设置外部中断0</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>);		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Int0()	interrupt 0</span></span><br><span class="line"><span class="comment">* 函数功能		   : 外部中断0的中断函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Int0</span><span class="params">()</span>	interrupt 0		<span class="comment">//外部中断0的中断函数</span></span><br><span class="line">&#123;</span><br><span class="line">	delay(<span class="number">1000</span>);	 <span class="comment">//延时消抖</span></span><br><span class="line">	<span class="keyword">if</span>(k3==<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		led=~led;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="外部中断1–控制蜂鸣器"><a href="#外部中断1–控制蜂鸣器" class="headerlink" title="外部中断1–控制蜂鸣器"></a>外部中断1–控制蜂鸣器</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              外部中断1--控制蜂鸣器实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后按下K4按键可以控制蜂鸣器发声。</span></span><br><span class="line"><span class="comment">注意事项：无。																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit k4=P3^<span class="number">3</span>;  <span class="comment">//定义按键K4</span></span><br><span class="line">sbit beep=P1^<span class="number">5</span>;	 <span class="comment">//定义P15口是beep</span></span><br><span class="line"></span><br><span class="line">u8 beep_flag=<span class="number">0</span>;  <span class="comment">//蜂鸣器报警标志位</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : delay</span></span><br><span class="line"><span class="comment">* 函数功能		   : 延时函数，i=1时，大约延时10us</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">delay</span><span class="params">(u16 i)</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="keyword">while</span>(i--);	</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Int1Init()</span></span><br><span class="line"><span class="comment">* 函数功能		   : 设置外部中断1</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Int1Init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">//设置INT1</span></span><br><span class="line">	IT1=<span class="number">1</span>;<span class="comment">//跳变沿出发方式（下降沿）</span></span><br><span class="line">	EX1=<span class="number">1</span>;<span class="comment">//打开INT1的中断允许。	</span></span><br><span class="line">	EA=<span class="number">1</span>;<span class="comment">//打开总中断	</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	Int1Init();  <span class="comment">//	设置外部中断1</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(beep_flag==<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			beep=!beep;</span><br><span class="line">			delay(<span class="number">10</span>);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Int1()	interrupt 2</span></span><br><span class="line"><span class="comment">* 函数功能		   : 外部中断1的中断函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Int1</span><span class="params">()</span>	interrupt 2		<span class="comment">//外部中断1的中断函数</span></span><br><span class="line">&#123;</span><br><span class="line">	delay(<span class="number">1000</span>);	 <span class="comment">//延时消抖</span></span><br><span class="line">	<span class="keyword">if</span>(k4==<span class="number">0</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		beep_flag=!beep_flag;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="定时器和计数器"><a href="#定时器和计数器" class="headerlink" title="定时器和计数器"></a>定时器和计数器</h3><h4 id="定时器-计数器简介"><a href="#定时器-计数器简介" class="headerlink" title="定时器&#x2F;计数器简介"></a>定时器&#x2F;计数器简介</h4><p>定时器&#x2F;计数器（Timer&#x2F;Counter，简称T&#x2F;C）是单片机中最基本的接口之一。即可以定时又可以计数。常用于计数、延时、测量周期&#x2F;脉宽&#x2F;频率、提供定时脉冲信号等。</p>
<p>8051系列单片机至少含有2个16位的T&#x2F;C，STC89C51&#x2F;52含有3个T&#x2F;C。其中2个为基本定时器&#x2F;计数器T&#x2F;C0和T&#x2F;C1，另一个是T&#x2F;C2。可通过软件配置为定时器功能或者计数器功能。</p>
<p>定时&#x2F;计数器的工作原理： 定时&#x2F;计数器实质上是一个加1计数器。当工作在定时器模式时，对振荡源12分频的脉冲计数，即每个机器周期计数值加1，当加到计数器为全1时，再输入一个脉冲就使计数器回零。当工作在计数器模式时，计数脉冲来至外部脉冲输入引脚P3.4（T0）和P3.5（T1），当T0或T1脚上负跳变时计数值加1 ，识别管脚负跳变需要2个机器周期，即24个振荡周期。所以T0或T1脚输入的可计数的外部脉冲的最高频率为1&#x2F;24fosc，当晶振12MHZ时，最高计数频率为500KHz，高于此频率将计数出错。</p>
<p>定时器&#x2F;计数器内部结构：</p>
<p><img src="https://i.loli.net/2020/12/06/QjTtULSuerYwHEa.png" alt="24.png"></p>
<h4 id="定时器-计数器寄存器"><a href="#定时器-计数器寄存器" class="headerlink" title="定时器&#x2F;计数器寄存器"></a>定时器&#x2F;计数器寄存器</h4><h5 id="控制寄存器TCON"><a href="#控制寄存器TCON" class="headerlink" title="控制寄存器TCON"></a>控制寄存器TCON</h5><p><img src="https://i.loli.net/2020/12/06/n6qVLovPjYTKlaF.png" alt="25.png"></p>
<p>TF1：T1溢出中断请求标志位。</p>
<p>TR1：T1运行控制位。TR1置1时，T1开始工作；TR1置0时，T1停止工作。</p>
<p>TF0：T0溢出中断请求标志位。</p>
<p>TR0：T0运行控制位。</p>
<h5 id="工作方式寄存器TMOD"><a href="#工作方式寄存器TMOD" class="headerlink" title="工作方式寄存器TMOD"></a>工作方式寄存器TMOD</h5><p><img src="https://i.loli.net/2020/12/06/D7vUhyimA6bwpJd.png" alt="26.png"></p>
<p><img src="https://i.loli.net/2020/12/06/ADLrWyPutTdhc1s.png" alt="27.png"></p>
<h5 id="定时-计数器2控制寄存器T2CON"><a href="#定时-计数器2控制寄存器T2CON" class="headerlink" title="定时&#x2F;计数器2控制寄存器T2CON"></a>定时&#x2F;计数器2控制寄存器T2CON</h5><h4 id="定时器-计数器工作方式"><a href="#定时器-计数器工作方式" class="headerlink" title="定时器&#x2F;计数器工作方式"></a><img src="https://i.loli.net/2020/12/06/vVDf8czMtwhdKsJ.png" alt="28.png">定时器&#x2F;计数器工作方式</h4><p>通过工作方式寄存器TMOD的M0和M1组合，形成了定时器&#x2F;计数器的4种不同工作方式。T&#x2F;C0和T&#x2F;C1都可以工作在方式0、方式1、方式2工作，而方式3只有T&#x2F;C0才能工作。</p>
<h5 id="方式0"><a href="#方式0" class="headerlink" title="方式0"></a>方式0</h5><p>方式0为13位计数，由TL0的低5位（高3位未用）和TH0的8位组成。TL0的低5位溢出时向TH0进位，TH0溢出时，置位TCON中的TF0标志，向CPU发出中断请求。</p>
<p><img src="https://i.loli.net/2020/12/06/loafGYi4kCt5jSc.png" alt="29.png"></p>
<h5 id="方式1"><a href="#方式1" class="headerlink" title="方式1"></a>方式1</h5><p>方式1的计数位数是16位，由TL0作为低8位，TH0作为高8位，组成了16位加1计数器。</p>
<p><img src="https://i.loli.net/2020/12/06/5TdSobO9lrnmU31.png" alt="30.png"></p>
<h5 id="方式2"><a href="#方式2" class="headerlink" title="方式2"></a>方式2</h5><p>方式2为自动重装初值的8位计数方式。</p>
<p><img src="https://i.loli.net/2020/12/06/QqWrZ6VKAeYoMjp.png" alt="31.png"></p>
<h5 id="方式3"><a href="#方式3" class="headerlink" title="方式3"></a>方式3</h5><p>方式3只适用于定时&#x2F;计数器T0，工作方式3将T0分成为两个独立的8位计数器TL0和TH0。定时器T1处于方式3时相当于TR1&#x3D;0，停止计数。</p>
<p><img src="https://i.loli.net/2020/12/06/Ti7HIJz24DNna6A.png" alt="32.png"></p>
<h4 id="定时器-计数器使用方法"><a href="#定时器-计数器使用方法" class="headerlink" title="定时器&#x2F;计数器使用方法"></a>定时器&#x2F;计数器使用方法</h4><p>①对TMOD赋值，以确定T0和T1的工作方式。</p>
<p>②计算初值,并将其写入TH0、TL0或TH1、TL1。</p>
<p>③中断方式时，打开定时器中断（ET0&#x2F;ET1）及总中断EA。</p>
<p>④使TR0或TR1置位，启动定时&#x2F;计数器定时或计数</p>
<p>定时器&#x2F;计数器初值计算：</p>
<p>假如要定时1ms，定时器初值是多少？</p>
<p>计数脉冲个数N&#x3D;1ms&#x2F;1us&#x3D;1000个</p>
<p>定时器初值X&#x3D;2^16-1000&#x3D;65536-1000&#x3D;64536&#x3D;0XFC18</p>
<h3 id="定时器中断"><a href="#定时器中断" class="headerlink" title="定时器中断"></a>定时器中断</h3><h4 id="定时器0中断–控制LED"><a href="#定时器0中断–控制LED" class="headerlink" title="定时器0中断–控制LED"></a>定时器0中断–控制LED</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              定时器0中断--控制LED实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后D1小灯循环点亮1秒，熄灭1秒。使用单片机内部定时器可以实现准确延时。</span></span><br><span class="line"><span class="comment">注意事项：无。																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit led=P2^<span class="number">0</span>;	 <span class="comment">//定义P20口是led</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Timer0Init</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器0初始化</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer0Init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">		TMOD&amp;=<span class="number">0XFC</span>;   <span class="comment">//使定时器模式清零，11111100，无论初始为多少，后面一律变成??????00,在自行写入定时器工作方式 </span></span><br><span class="line">	TMOD|=<span class="number">0X01</span>;<span class="comment">//选择为定时器0模式，工作方式1，仅用TR0打开启动。</span></span><br><span class="line"></span><br><span class="line">	TH0=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL0=<span class="number">0X18</span>;	</span><br><span class="line">	ET0=<span class="number">1</span>;<span class="comment">//打开定时器0中断允许</span></span><br><span class="line">	EA=<span class="number">1</span>;<span class="comment">//打开总中断</span></span><br><span class="line">	TR0=<span class="number">1</span>;<span class="comment">//打开定时器			</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	Timer0Init();  <span class="comment">//定时器0初始化</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>);		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : void Timer0() interrupt 1</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器0中断函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer0</span><span class="params">()</span> interrupt 1</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">static</span> u16 i;</span><br><span class="line">	TH0=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL0=<span class="number">0X18</span>;</span><br><span class="line">	i++;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1000</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		i=<span class="number">0</span>;</span><br><span class="line">		led=~led;	</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="定时器1中断–控制数码管"><a href="#定时器1中断–控制数码管" class="headerlink" title="定时器1中断–控制数码管"></a>定时器1中断–控制数码管</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              定时器1中断--控制数码管实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后数码管间隔一秒循环显示0-F。使用单片机内部定时器可以实现准确延时。</span></span><br><span class="line"><span class="comment">注意事项：将LED点阵模块的J1短接片短接到VCC端																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit LSA=P3^<span class="number">0</span>;</span><br><span class="line">sbit LSB=P3^<span class="number">1</span>;</span><br><span class="line">sbit LSC=P3^<span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">u8 code smgduan[<span class="number">17</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,</span><br><span class="line">					<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;<span class="comment">//显示0~F的值</span></span><br><span class="line">u8 n=<span class="number">0</span>;</span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Timer1Init</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器1初始化</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer1Init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	TMOD|=<span class="number">0X10</span>;<span class="comment">//选择为定时器1模式，工作方式1，仅用TR1打开启动。</span></span><br><span class="line"></span><br><span class="line">	TH1=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL1=<span class="number">0X18</span>;	</span><br><span class="line">	ET1=<span class="number">1</span>;<span class="comment">//打开定时器1中断允许</span></span><br><span class="line">	EA=<span class="number">1</span>;<span class="comment">//打开总中断</span></span><br><span class="line">	TR1=<span class="number">1</span>;<span class="comment">//打开定时器			</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	LSA=<span class="number">0</span>;</span><br><span class="line">	LSB=<span class="number">0</span>;</span><br><span class="line">	LSC=<span class="number">0</span>;</span><br><span class="line">	Timer1Init();  <span class="comment">//定时器1初始化</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>);		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : void Timer1() interrupt 3</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器1中断函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer1</span><span class="params">()</span> interrupt 3</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">static</span> u16 i;</span><br><span class="line">	TH1=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL1=<span class="number">0X18</span>;</span><br><span class="line">	i++;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1000</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		i=<span class="number">0</span>;</span><br><span class="line">		P0=smgduan[n++];</span><br><span class="line">		<span class="keyword">if</span>(n==<span class="number">16</span>)n=<span class="number">0</span>;	</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="简易交通灯"><a href="#简易交通灯" class="headerlink" title="简易交通灯"></a>简易交通灯</h3><p>本节所要实现的功能是：系统运行时，横向通行绿灯亮10秒，然后黄灯亮3秒，纵向通行绿灯亮10秒，黄灯亮3秒。数码管显示倒计时。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              简易交通灯实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后，数码管显示交通灯时间，注意：由于交通灯控制口和数码管位选共用了3个引脚，所以</span></span><br><span class="line"><span class="comment">			不能显示多位数字，如果强制显示，将会干扰交通灯LED状态。</span></span><br><span class="line"><span class="comment">注意事项：将LED点阵模块的J1短接片短接到VCC端																				  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line">sbit LSA=P2^<span class="number">2</span>;</span><br><span class="line">sbit LSB=P2^<span class="number">3</span>;</span><br><span class="line">sbit LSC=P2^<span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">sbit rd1=P2^<span class="number">0</span>; <span class="comment">//D1 红色LED</span></span><br><span class="line">sbit yd1=P2^<span class="number">1</span>; <span class="comment">//D2 黄色LED</span></span><br><span class="line">sbit gd1=P2^<span class="number">2</span>; <span class="comment">//D3 绿色LED</span></span><br><span class="line"></span><br><span class="line">sbit rd2=P2^<span class="number">3</span>; <span class="comment">//D4 红色LED</span></span><br><span class="line">sbit yd2=P2^<span class="number">4</span>; <span class="comment">//D5 黄色LED</span></span><br><span class="line">sbit gd2=P2^<span class="number">5</span>; <span class="comment">//D6 绿色LED</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">u8 code smgduan[<span class="number">17</span>]=&#123;<span class="number">0x3f</span>,<span class="number">0x06</span>,<span class="number">0x5b</span>,<span class="number">0x4f</span>,<span class="number">0x66</span>,<span class="number">0x6d</span>,<span class="number">0x7d</span>,<span class="number">0x07</span>,</span><br><span class="line">					<span class="number">0x7f</span>,<span class="number">0x6f</span>,<span class="number">0x77</span>,<span class="number">0x7c</span>,<span class="number">0x39</span>,<span class="number">0x5e</span>,<span class="number">0x79</span>,<span class="number">0x71</span>&#125;;<span class="comment">//显示0~F的值</span></span><br><span class="line"><span class="type">char</span> sec1=<span class="number">0</span>,sec2=<span class="number">0</span>,sec3=<span class="number">0</span>,sec4=<span class="number">0</span>;</span><br><span class="line">u8 sec1flag=<span class="number">1</span>,sec2flag,sec3flag,sec4flag;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : Timer1Init</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器1初始化</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer1Init</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	TMOD|=<span class="number">0X10</span>;<span class="comment">//选择为定时器1模式，工作方式1，仅用TR1打开启动。</span></span><br><span class="line"></span><br><span class="line">	TH1=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL1=<span class="number">0X18</span>;	</span><br><span class="line">	ET1=<span class="number">1</span>;<span class="comment">//打开定时器1中断允许</span></span><br><span class="line">	EA=<span class="number">1</span>;<span class="comment">//打开总中断</span></span><br><span class="line">	TR1=<span class="number">1</span>;<span class="comment">//打开定时器			</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	LSA=<span class="number">1</span>;</span><br><span class="line">	LSB=<span class="number">1</span>;</span><br><span class="line">	LSC=<span class="number">1</span>;</span><br><span class="line">	Timer1Init();  <span class="comment">//定时器1初始化</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">if</span>(sec1&lt;<span class="number">10</span>&amp;&amp;sec1flag==<span class="number">1</span>)		  <span class="comment">//横向通行绿灯亮10秒</span></span><br><span class="line">		&#123;</span><br><span class="line">			rd1=<span class="number">0</span>;		 <span class="comment">//纵向禁止通行	   红灯亮 黄灯灭 绿灯灭</span></span><br><span class="line">			yd1=<span class="number">1</span>;</span><br><span class="line">			gd1=<span class="number">1</span>;	  </span><br><span class="line"></span><br><span class="line">			rd2=<span class="number">1</span>;		 <span class="comment">//横向通行	   红灯灭 黄灯灭 绿灯亮</span></span><br><span class="line">			yd2=<span class="number">1</span>;</span><br><span class="line">			gd2=<span class="number">0</span>;</span><br><span class="line">			P0=smgduan[<span class="number">9</span>-sec1];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec2&lt;<span class="number">4</span>&amp;&amp;sec2flag==<span class="number">1</span>)  <span class="comment">//横向通行黄灯亮3秒</span></span><br><span class="line">		&#123;</span><br><span class="line">			rd1=<span class="number">0</span>;		 <span class="comment">//纵向禁止通行	   红灯亮 黄灯灭 绿灯灭</span></span><br><span class="line">			yd1=<span class="number">1</span>;</span><br><span class="line">			gd1=<span class="number">1</span>;	  </span><br><span class="line"></span><br><span class="line">			rd2=<span class="number">1</span>;		 <span class="comment">//横向通行	   红灯灭 黄灯亮 绿灯灭</span></span><br><span class="line">			yd2=<span class="number">0</span>;</span><br><span class="line">			gd2=<span class="number">1</span>;</span><br><span class="line">			P0=smgduan[<span class="number">3</span>-sec2];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec3&lt;<span class="number">10</span>&amp;&amp;sec3flag==<span class="number">1</span>)  <span class="comment">//纵向通行绿灯亮10秒</span></span><br><span class="line">		&#123;</span><br><span class="line">			rd1=<span class="number">1</span>;		 <span class="comment">//纵向通行	   红灯灭 黄灯灭 绿灯亮</span></span><br><span class="line">			yd1=<span class="number">1</span>;</span><br><span class="line">			gd1=<span class="number">0</span>;	  </span><br><span class="line"></span><br><span class="line">			rd2=<span class="number">0</span>;		 <span class="comment">//横向禁止通行	   红灯亮 黄灯灭 绿灯灭</span></span><br><span class="line">			yd2=<span class="number">1</span>;</span><br><span class="line">			gd2=<span class="number">1</span>;</span><br><span class="line">			P0=smgduan[<span class="number">10</span>-sec3];</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec4&lt;<span class="number">4</span>&amp;&amp;sec4flag==<span class="number">1</span>)  <span class="comment">//纵向通行黄灯亮3秒</span></span><br><span class="line">		&#123;</span><br><span class="line">			rd1=<span class="number">1</span>;		 <span class="comment">//纵向通行	   红灯灭 黄灯亮 绿灯灭</span></span><br><span class="line">			yd1=<span class="number">0</span>;</span><br><span class="line">			gd1=<span class="number">1</span>;	  </span><br><span class="line"></span><br><span class="line">			rd2=<span class="number">0</span>;		 <span class="comment">//横向禁止通行	   红灯亮 黄灯灭 绿灯灭</span></span><br><span class="line">			yd2=<span class="number">1</span>;</span><br><span class="line">			gd2=<span class="number">1</span>;</span><br><span class="line">			P0=smgduan[<span class="number">3</span>-sec4];</span><br><span class="line">		&#125;</span><br><span class="line">				</span><br><span class="line">	&#125;		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名         : void Timer1() interrupt 3</span></span><br><span class="line"><span class="comment">* 函数功能		   : 定时器1中断函数</span></span><br><span class="line"><span class="comment">* 输    入         : 无</span></span><br><span class="line"><span class="comment">* 输    出         : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Timer1</span><span class="params">()</span> interrupt 3</span><br><span class="line">&#123;</span><br><span class="line">	<span class="type">static</span> u16 i;</span><br><span class="line">	TH1=<span class="number">0XFC</span>;	<span class="comment">//给定时器赋初值，定时1ms</span></span><br><span class="line">	TL1=<span class="number">0X18</span>;</span><br><span class="line">	i++;</span><br><span class="line">	<span class="keyword">if</span>(i==<span class="number">1000</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		i=<span class="number">0</span>;</span><br><span class="line">		<span class="keyword">if</span>(sec1flag==<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sec1++;</span><br><span class="line">			<span class="keyword">if</span>(sec1&gt;<span class="number">9</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				sec1=<span class="number">0</span>;</span><br><span class="line">				sec1flag=<span class="number">0</span>;</span><br><span class="line">				sec2flag=<span class="number">1</span>;</span><br><span class="line">			&#125;	</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec2flag==<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sec2++;</span><br><span class="line">			<span class="keyword">if</span>(sec2&gt;<span class="number">3</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				sec2=<span class="number">0</span>;</span><br><span class="line">				sec2flag=<span class="number">0</span>;	</span><br><span class="line">				sec3flag=<span class="number">1</span>;</span><br><span class="line">			&#125;		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec3flag==<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sec3++;</span><br><span class="line">			<span class="keyword">if</span>(sec3&gt;<span class="number">9</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				sec3=<span class="number">0</span>;</span><br><span class="line">				sec3flag=<span class="number">0</span>;</span><br><span class="line">				sec4flag=<span class="number">1</span>;</span><br><span class="line">			&#125;		</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">if</span>(sec4flag==<span class="number">1</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			sec4++;</span><br><span class="line">			<span class="keyword">if</span>(sec4&gt;<span class="number">3</span>)</span><br><span class="line">			&#123;</span><br><span class="line">				sec4=<span class="number">0</span>;</span><br><span class="line">				sec4flag=<span class="number">0</span>;</span><br><span class="line">				sec1flag=<span class="number">1</span>;</span><br><span class="line">			&#125;		</span><br><span class="line">		&#125;		</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="串口通信"><a href="#串口通信" class="headerlink" title="串口通信"></a>串口通信</h3><h4 id="通信的概念"><a href="#通信的概念" class="headerlink" title="通信的概念"></a>通信的概念</h4><p>通信的方式可以分为多种，按照数据传送方式可分为串行通信和并行通信。按照通信的数据同步方式，可分为异步通信和同步通信。按照数据的传输方向又可分为单工、半双工和全双工通信。</p>
<h5 id="串行通信与并行通信"><a href="#串行通信与并行通信" class="headerlink" title="串行通信与并行通信"></a>串行通信与并行通信</h5><h6 id="串行通信"><a href="#串行通信" class="headerlink" title="串行通信"></a>串行通信</h6><p>串行通信是指使用一条数据线，将数据一位一位地依次传输，每一位数据占据一个固定的时间长度。其只需要少数几条线就可以在系统间交换信息，特别适用于计算机与计算机、计算机与外设之间的远距离通信。</p>
<p><img src="https://i.loli.net/2020/12/07/cbgF5lqsmoHE3uj.png" alt="33.png"></p>
<p>特点：传输线少，长距离传送时成本低，且可以利用电话网等现成的设备，但数据的传送控制比并行通信复杂。</p>
<h6 id="并行通信"><a href="#并行通信" class="headerlink" title="并行通信"></a>并行通信</h6><p>并行通信通常是将数据字节的各位用多条数据线同时进行传送，通常是8位、16位、32位等数据一起传输。</p>
<p><img src="https://i.loli.net/2020/12/07/1DCZknPlJx59G4y.png" alt="34.png"></p>
<p>特点：控制简单、传输速度快；由于传输线较多，长距离传送时成本高且接收方的各位同时接收存在困难，抗干扰能力差。</p>
<h5 id="异步通信与同步通信"><a href="#异步通信与同步通信" class="headerlink" title="异步通信与同步通信"></a>异步通信与同步通信</h5><h6 id="异步通信"><a href="#异步通信" class="headerlink" title="异步通信"></a>异步通信</h6><p>异步通信是指通信的发送与接收设备使用各自的时钟控制数据的发送和接收过程。为使双方的收发协调，要求发送和接收设备的时钟尽可能一致。异步通信是以字符（构成的帧）为单位进行传输，字符与字符之间的间隙（时间间隔）是任意的，但每个字符中的各位是以固定的时间传送的，即字符之间不一定有“位间隔”的整数倍的关系，但同一字符内的各位之间的距离均为“位间隔”的整数倍。</p>
<p><img src="https://i.loli.net/2020/12/07/q6nduDsHgCbQwmV.png" alt="35.png"></p>
<p>特点：不要求收发双方时钟的严格一致，实现容易，设备开销较小，但每个字符要附加2～3位用于起止位，各帧之间还有间隔，因此传输效率不高。</p>
<h6 id="同步通信"><a href="#同步通信" class="headerlink" title="同步通信"></a>同步通信</h6><p>同步通信时要建立发送方时钟对接收方时钟的直接控制，使双方达到完全同步。此时，传输数据的位之间的距离均为“位间隔”的整数倍，同时传送的字符间不留间隙，即保持位同步关系，也保持字符同步关系。发送方对接收方的同步可以通过两种方法实现。</p>
<p><img src="https://i.loli.net/2020/12/07/8kFAWwavgifyxdl.png" alt="36.png"></p>
<h5 id="单工、半双工与全双工通信"><a href="#单工、半双工与全双工通信" class="headerlink" title="单工、半双工与全双工通信"></a>单工、半双工与全双工通信</h5><h6 id="单工通信"><a href="#单工通信" class="headerlink" title="单工通信"></a>单工通信</h6><p>单工是指数据传输仅能沿一个方向，不能实现反向传输。</p>
<h6 id="半双工通信"><a href="#半双工通信" class="headerlink" title="半双工通信"></a>半双工通信</h6><p>半双工是指数据传输可以沿两个方向，但需要分时进行。</p>
<h6 id="全双工通信"><a href="#全双工通信" class="headerlink" title="全双工通信"></a>全双工通信</h6><p>全双工是指数据可以同时进行双向传输。</p>
<h5 id="通信速率"><a href="#通信速率" class="headerlink" title="通信速率"></a>通信速率</h5><p>衡量通信性能的一个非常重要的参数就是通信速率，通常以比特率(Bitrate)来表示。比特率是每秒钟传输二进制代码的位数，单位是：位／秒（bps）。如每秒钟传送240个字符，而每个字符格式包含10位(1个起始位、1个停止位、8个数据位)，这时的比特率为：10位×240个&#x2F;秒 &#x3D; 2400 bps</p>
<h4 id="串口通信简介"><a href="#串口通信简介" class="headerlink" title="串口通信简介"></a>串口通信简介</h4><p>串口通信(Serial Communication)，是指外设和计算机间，通过数据信号线、地线等，按位进行传输数据的一种通信方式，属于串行通信方式。串口是一种接口标准，它规定了接口的电气标准，没有规定接口插件电缆以及使用的协议。</p>
<p>RS232的通信协议比较简单，通常遵循96-N-8-1格式。</p>
<p>串口内部结构</p>
<p><img src="https://i.loli.net/2020/12/07/WFBrLnIxgMEQaKj.png" alt="37.png"></p>
<h4 id="串口相关寄存器"><a href="#串口相关寄存器" class="headerlink" title="串口相关寄存器"></a>串口相关寄存器</h4><h5 id="串口控制寄存器SCON"><a href="#串口控制寄存器SCON" class="headerlink" title="串口控制寄存器SCON"></a>串口控制寄存器SCON</h5><p><img src="https://i.loli.net/2020/12/07/LECvXmcIBnJsQtF.png" alt="38.png"></p>
<p>SM0和SM1为工作方式选择位：</p>
<p><img src="https://i.loli.net/2020/12/07/KQCVIltW29fz6Jd.png" alt="39.png"></p>
<p>SM2：多机通信控制位，主要用于方式2和方式3。当SM2&#x3D;1时可以利用收到的RB8来控制是否激活RI（RB8＝0时不激活RI，收到的信息丢弃；RB8＝1时收到的数据进入SBUF，并激活RI，进而在中断服务中将数据从SBUF读走）。当SM2&#x3D;0时，不论收到的RB8为0和1，均可以使收到的数据进入SBUF，并激活RI（即此时RB8不具有控制RI激活的功能）。通过控制SM2，可以实现多机通信。</p>
<p>REN：允许串行接收位。由软件置REN&#x3D;1，则启动串行口接收数据；若软件置REN&#x3D;0，则禁止接收。</p>
<p>TB8：在方式2或方式3中，是发送数据的第9位，可以用软件规定其作用。可以用作数据的奇偶校验位，或在多机通信中，作为地址帧&#x2F;数据帧的标志位。在方式0和方式1中，该位未用到。</p>
<p>RB8：在方式2或方式3中，是接收到数据的第9位，作为奇偶校验位或地址帧&#x2F;数据帧的标志位。在方式1时，若SM2&#x3D;0，则RB8是接收到的停止位。</p>
<p>TI：发送中断标志位。在方式0时，当串行发送第8位数据结束时，或在其它方式，串行发送停止位的开始时，由内部硬件使TI置1，向CPU发中断申请。在中断服务程序中，必须用软件将其清0，取消此中断申请。</p>
<p>RI：接收中断标志位。在方式0时，当串行接收第8位数据结束时，或在其它方式，串行接收停止位的中间时，由内部硬件使RI置1，向CPU发中断申请。也必须在中断服务程序中，用软件将其清0，取消此中断申请。</p>
<h5 id="电源控制寄存器PCON"><a href="#电源控制寄存器PCON" class="headerlink" title="电源控制寄存器PCON"></a>电源控制寄存器PCON</h5><p><img src="https://i.loli.net/2020/12/07/WKoSLQuDdTy1IGn.png" alt="40.png"></p>
<p>SMOD：波特率倍增位。在串口方式1、方式2、方式3时，波特</p>
<p>率与SMOD有关，当SMOD&#x3D;1时，波特率提高一倍。复位时，SMOD&#x3D;0。</p>
<h4 id="串口工作方式"><a href="#串口工作方式" class="headerlink" title="串口工作方式"></a>串口工作方式</h4><h5 id="方式0-1"><a href="#方式0-1" class="headerlink" title="方式0"></a>方式0</h5><p>方式0时，串行口为同步移位寄存器的输入输出方式。主要用于扩展并行输入或输出口。数据由RXD（P3.0）引脚输入或输出，同步移位脉冲由TXD（P3.1）引脚输出。发送和接收均为8位数据，低位在先，高位在后。波特率固定为fosc&#x2F;12。</p>
<p>①方式0输出</p>
<p><img src="https://i.loli.net/2020/12/07/PwnHAJVobMazWl3.png" alt="41.png"></p>
<p>②方式0输入</p>
<p><img src="https://i.loli.net/2020/12/07/4ZLMr2BE9IFHfpb.png" alt="42.png"></p>
<h5 id="方式1-1"><a href="#方式1-1" class="headerlink" title="方式1"></a>方式1</h5><p>方式1是10位数据的异步通信口。TXD为数据发送引脚，RXD为数据接收引脚，传送一帧数据的格式如下所示。其中1位起始位，8位数据位，1位停止位。</p>
<p><img src="https://i.loli.net/2020/12/07/4TwE29efK1uqJ3l.png" alt="43.png"></p>
<p>①方式1输出</p>
<p><img src="https://i.loli.net/2020/12/07/E8f4jOI5pVFAv7h.png" alt="44.png"></p>
<p>②方式1输入</p>
<p><img src="https://i.loli.net/2020/12/07/MIw8RfK61YTXGZU.png" alt="45.png"></p>
<p>用软件置REN为1时，接收器以所选择波特率的16倍速率采样RXD引脚电平，检测到RXD引脚输入电平发生负跳变时，则说明起始位有效，将其移入输入移位寄存器，并开始接收这一帧信息的其余位。接收过程中，数据从输入移位寄存器右边移入，起始位移至输入移位寄存器最左边时，控制电路进行最后一次移位。当RI&#x3D;0，且SM2&#x3D;0（或接收到的停止位为1）时，将接收到的9位数据的前8位数据装入接收SBUF，第9位（停止位）进入RB8，并置RI&#x3D;1，向CPU请求中断。</p>
<h5 id="方式2和方式3"><a href="#方式2和方式3" class="headerlink" title="方式2和方式3"></a>方式2和方式3</h5><p>方式2或方式3时为11位数据的异步通信口。TXD为数据发送引脚，<br>RXD为数据接收引脚 。 </p>
<p><img src="https://i.loli.net/2020/12/07/B1JgVqKY6HeRlFd.png" alt="46.png"></p>
<p>①方式2、方式3输出</p>
<p><img src="https://i.loli.net/2020/12/07/J7wbxnhk1Cqez93.png" alt="47.png"></p>
<p>发送开始时，先把起始位0输出到TXD引脚，然后发送移位寄存器的输出位（D0）到TXD引脚。每一个移位脉冲都使输出移位寄存器的各位右移一位，并由TXD引脚输出。 第一次移位时，停止位“1”移入输出移位寄存器的第9位上 ，以后每次移位，左边都移入0。当停止位移至输出位时，左边其余位全为0，检测电路检测到这一条件时，使控制电路进行最后一次移位，并置TI&#x3D;1，向CPU请求中断。</p>
<p>②方式2、方式3输入</p>
<p><img src="https://i.loli.net/2020/12/07/bEYRKcOW41o9S6F.png" alt="48.png"></p>
<p>接收时，数据从右边移入输入移位寄存器，在起始位0移到最左边时，控制电路进行最后一次移位。当RI&#x3D;0，且SM2&#x3D;0（或接收到的第9位数据为1）时，接收到的数据装入接收缓冲器SBUF和RB8（接收数据的第9位），置RI&#x3D;1，向CPU请求中断。如果条件不满足，则数据丢失，且不置位RI，继续搜索RXD引脚的负跳变。</p>
<h4 id="串口的使用"><a href="#串口的使用" class="headerlink" title="串口的使用"></a>串口的使用</h4><p>（1）如何计算波特率</p>
<p>方式0的波特率 &#x3D; fosc&#x2F;12</p>
<p>方式2的波特率 &#x3D;（2SMOD&#x2F;64）· fosc </p>
<p>方式1的波特率 &#x3D;（2SMOD&#x2F;32）·（T1溢出率）</p>
<p>方式3的波特率 &#x3D;（2SMOD&#x2F;32）·（T1溢出率）</p>
<p>T1 溢出率 &#x3D; fosc &#x2F;{12×[256 －（TH1）]}</p>
<p><img src="https://i.loli.net/2020/12/07/7qZDs6VG4wrjfyC.png" alt="49.png"></p>
<p>（2）串口初始化步骤</p>
<p>①确定T1的工作方式（TMOD寄存器）；</p>
<p>②确定串口工作方式（SCON寄存器）；</p>
<p>③计算T1的初值（设定波特率），装载TH1、TL1；</p>
<p>④启动T1（TCON中的TR1位）；</p>
<p>⑤如果使用中断，需开启串口中断控制位（IE寄存器）。</p>
<h4 id="串口模块电路"><a href="#串口模块电路" class="headerlink" title="串口模块电路"></a>串口模块电路</h4><p><img src="https://i.loli.net/2020/12/07/h3DLq6wQcuJ9C4m.png" alt="50.png"></p>
<h4 id="编写程序-5"><a href="#编写程序-5" class="headerlink" title="编写程序"></a>编写程序</h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**************************************************************************************</span></span><br><span class="line"><span class="comment">*		              串口通信实验												  *</span></span><br><span class="line"><span class="comment">实现现象：下载程序后打开串口调试助手，将波特率设置为4800，选择发送的数据就可以显示</span></span><br><span class="line"><span class="comment">			在串口助手上。</span></span><br><span class="line"><span class="comment">注意事项：	串口调试助手操作步骤见实验内现象截图。																			  </span></span><br><span class="line"><span class="comment">***************************************************************************************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;reg52.h&quot;</span>			 <span class="comment">//此文件中定义了单片机的一些特殊功能寄存器</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">int</span> u16;	  <span class="comment">//对数据类型进行声明定义</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="type">unsigned</span> <span class="type">char</span> u8;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函数名         :UsartInit()</span></span><br><span class="line"><span class="comment">* 函数功能		   :设置串口</span></span><br><span class="line"><span class="comment">* 输入           : 无</span></span><br><span class="line"><span class="comment">* 输出         	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">UsartInit</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">	SCON=<span class="number">0X50</span>;			<span class="comment">//设置为工作方式1</span></span><br><span class="line">	TMOD=<span class="number">0X20</span>;			<span class="comment">//设置计数器工作方式2</span></span><br><span class="line">	PCON=<span class="number">0X80</span>;			<span class="comment">//波特率加倍</span></span><br><span class="line">	TH1=<span class="number">0XF3</span>;				<span class="comment">//计数器初始值设置，注意波特率是4800的</span></span><br><span class="line">	TL1=<span class="number">0XF3</span>;</span><br><span class="line">	ES=<span class="number">1</span>;						<span class="comment">//打开接收中断</span></span><br><span class="line">	EA=<span class="number">1</span>;						<span class="comment">//打开总中断</span></span><br><span class="line">	TR1=<span class="number">1</span>;					<span class="comment">//打开计数器</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函 数 名       : main</span></span><br><span class="line"><span class="comment">* 函数功能		 : 主函数</span></span><br><span class="line"><span class="comment">* 输    入       : 无</span></span><br><span class="line"><span class="comment">* 输    出    	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;	</span><br><span class="line">	UsartInit();  <span class="comment">//	串口初始化</span></span><br><span class="line">	<span class="keyword">while</span>(<span class="number">1</span>);		</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*******************************************************************************</span></span><br><span class="line"><span class="comment">* 函数名         : Usart() interrupt 4</span></span><br><span class="line"><span class="comment">* 函数功能		  : 串口通信中断函数</span></span><br><span class="line"><span class="comment">* 输入           : 无</span></span><br><span class="line"><span class="comment">* 输出         	 : 无</span></span><br><span class="line"><span class="comment">*******************************************************************************/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Usart</span><span class="params">()</span> interrupt 4</span><br><span class="line">&#123;</span><br><span class="line">	u8 receiveData;</span><br><span class="line">	receiveData=SBUF;<span class="comment">//出去接收到的数据</span></span><br><span class="line">	RI = <span class="number">0</span>;<span class="comment">//清除接收中断标志位</span></span><br><span class="line">	SBUF=receiveData;<span class="comment">//将接收到的数据放入到发送寄存器</span></span><br><span class="line">	<span class="keyword">while</span>(!TI);			 <span class="comment">//等待发送数据完成</span></span><br><span class="line">	TI=<span class="number">0</span>;						 <span class="comment">//清除发送完成标志位</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>Vikebt
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://zhoucong.top/2024/06/16/%E7%AE%80%E5%8D%95%E5%85%A5%E9%97%A851%E5%8D%95%E7%89%87%E6%9C%BA/" title="简单入门51单片机">http://zhoucong.top/2024/06/16/简单入门51单片机/</a>
  </li>
  <li class="post-copyright-license">
      <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="https://s1.ax1x.com/2020/05/10/Y3dt3j.jpg">
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E5%BC%80%E5%8F%91/" rel="tag"># 开发</a>
              <a href="/tags/%E5%B5%8C%E5%85%A5%E5%BC%8F/" rel="tag"># 嵌入式</a>
              <a href="/tags/%E5%8D%95%E7%89%87%E6%9C%BA/" rel="tag"># 单片机</a>
              <a href="/tags/STC89C52/" rel="tag"># STC89C52</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2024/06/16/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E6%96%B9%E5%BC%8F%E6%98%AF%E9%AB%98%E4%BD%8E%E4%BD%8D%E9%A1%BA%E5%BA%8F/" rel="prev" title="常用数据传输方式是高低位顺序">
                  <i class="fa fa-angle-left"></i> 常用数据传输方式是高低位顺序
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2024/06/16/%E8%93%9D%E7%89%99%E6%A8%A1%E5%9D%97%E9%80%89%E5%9E%8B%E5%8F%8A%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="next" title="蓝牙模块选型及基础知识">
                  蓝牙模块选型及基础知识 <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Vikebt</span>
  </div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  





<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":0,"vOffset":-20},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":0.7,"opacityOnHover":0.2},"log":false});</script></body>
</html>
